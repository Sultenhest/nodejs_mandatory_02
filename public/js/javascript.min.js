function getUrlParameter(e){var a,t,d=decodeURIComponent(window.location.search.substring(1)).split("&");for(t=0;t<d.length;t++)if((a=d[t].split("="))[0]===e)return void 0===a[1]||a[1]}function initMap(){var e={lat:55.70394599999999,lng:12.53749300000004},a=new google.maps.Map(document.getElementById("map"),{zoom:10,center:e});new google.maps.Marker({position:e,map:a})}function createDeck(e){e.forEach(function(e){$("#main-deck").append(cardNoBody(e))})}function cardNoBody(e){var a='<div class="card fadeInUp pointer clickable" data-id="'+e._id+'">';return a+='<div class="card-header">',a+='<i class="fa fa-angle-right fa-3x" aria-hidden="true"></i>',a+="<h3>"+e.title+"</h3>",a+='<p class="secondary">'+dateFromObjectId(e._id)+"</p>",a+="</div>",a+="</div>"}function cardWithBody(e){var a='<div class="card">';return a+='<div class="card-header">',a+="<h3>"+e.title+"</h3>",null!=e._id&&(a+='<p class="secondary">'+dateFromObjectId(e._id)+"</p>"),a+="</div>",a+='<div class="card-body">',a+="<p>"+e.body+"</p>",a+="</div>",null!=e._id&&(a+='<div class="card-footer">',a+='<a href="/form?id='+e._id+'&type=update" class="btn btn-success">',a+='<i class="fa fa-pencil" aria-hidden="true"></i> Edit',a+="</a>",a+='<a href="/posts/'+e._id+'" class="btn btn-warning">',a+='<i class="fa fa-file-o" aria-hidden="true"></i> JSON',a+="</a>",a+='<a href="/form?id='+e._id+'&type=delete" class="btn btn-danger">',a+='<i class="fa fa-trash-o" aria-hidden="true"></i> Delete',a+="</a>",a+="</div>"),a+="</div>"}function dateFromObjectId(e){var a=new Date(1e3*parseInt(e.substring(0,8),16)),t=["January","February","March","April","May","June","July","August","September","October","November","December"][a.getMonth()]+" ";return t+=a.getDate()+" ",t+=a.getFullYear()+", ",t+=addLeadingZero(a.getHours())+":",t+=addLeadingZero(a.getMinutes())+":",t+=addLeadingZero(a.getSeconds())}function addLeadingZero(e){return 1==e.toString().length&&(e="0"+e),e}$(function(){var e=window.location.protocol+"//"+window.location.host,a=top.location.pathname,t="",d={title:"Sorry, we did not find anything..",body:"Contact somebody if this keeps on happening.."},i={title:"Fetching Data",body:'<img src="imgs/loader.gif" alt="Loading..." id="loader">'},r={title:"No results.",body:'Sorry, but we couldn\'t find anything matching the search string.<br>Press the <i class="fa fa-times" aria-hidden="true"></i> or type something else.'};if("/"===a)$.getJSON(e+"/posts/",function(e){createDeck(t=e)}).fail(function(){$("#main-deck").append(cardWithBody(d))}).always(function(){$("#loader").parent().hide()});else if("/form"===a){var o=getUrlParameter("id"),n=getUrlParameter("type");$("#form").hide(),"update"===n?($("#form-header").prepend("Update "),$("#form-sub-header").text("Update the following post"),$("#form").attr("action","/posts/"+o+"?_method=put")):"delete"===n?($("#form-header").prepend("Delete "),$("#form-sub-header").text("Are you sure you want to delete the following post?"),$("#form").attr("action","/posts/"+o+"?_method=delete")):($("#form-header").prepend("Create "),$("#form-sub-header").text("Create a new post"),$("#form").attr("action","/posts")),null!=o&&$.getJSON(e+"/posts/"+o,function(e){$("#title").val(e.title),$("#body").val(e.body),"update"===n?$("#submit").attr("value","Edit"):"delete"===n&&($("#title, #body").prop("disabled",!0),$("#submit").removeClass("btn-success").addClass("btn-danger").attr("value","Delete"))}),$("#loader").hide(),$("#form").show()}$("#main-deck").on("click",".clickable",function(){var a=$(this).attr("data-id");$(".modal").empty().append(cardWithBody(i)),$("#modal-overlay").show(),$.getJSON(e+"/posts/"+a,function(e){$(".modal").empty().append(cardWithBody(e))}),$(".modal-close").click(function(){$("#modal-overlay").hide()})}),$("#search-field").keyup(function(){var e=$(this).val().toLowerCase();$("#clear-search-field").removeClass("disabled"),$("#main-deck").empty(),t.forEach(function(a){a.title.toLowerCase().indexOf(e)>=0&&$("#main-deck").append(cardNoBody(a))}),$("#main-deck").is(":empty")&&$("#main-deck").append(cardWithBody(r)),$("#clear-search-field").click(function(){$(this).addClass("disabled"),$("#search-field").val(""),$("#main-deck").empty(),createDeck(t)}),""==e&&$("#clear-search-field").addClass("disabled")})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImphdmFzY3JpcHQuanMiXSwibmFtZXMiOlsiZ2V0VXJsUGFyYW1ldGVyIiwic1BhcmFtIiwic1BhcmFtZXRlck5hbWUiLCJpIiwic1VSTFZhcmlhYmxlcyIsImRlY29kZVVSSUNvbXBvbmVudCIsIndpbmRvdyIsImxvY2F0aW9uIiwic2VhcmNoIiwic3Vic3RyaW5nIiwic3BsaXQiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJpbml0TWFwIiwia2VhIiwibGF0IiwibG5nIiwibWFwIiwiZ29vZ2xlIiwibWFwcyIsIk1hcCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ6b29tIiwiY2VudGVyIiwiTWFya2VyIiwicG9zaXRpb24iLCJjcmVhdGVEZWNrIiwiZGF0YSIsImZvckVhY2giLCJlbGVtZW50IiwiJCIsImFwcGVuZCIsImNhcmROb0JvZHkiLCJodG1sIiwiX2lkIiwidGl0bGUiLCJkYXRlRnJvbU9iamVjdElkIiwiY2FyZFdpdGhCb2R5IiwiYm9keSIsIm9iamVjdElkIiwiZGF0ZU9iamVjdCIsIkRhdGUiLCJwYXJzZUludCIsInN0ciIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsImdldEZ1bGxZZWFyIiwiYWRkTGVhZGluZ1plcm8iLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJnZXRTZWNvbmRzIiwibnVtYmVyIiwidG9TdHJpbmciLCJyb290VVJMIiwicHJvdG9jb2wiLCJob3N0IiwicGF0aE5hbWUiLCJ0b3AiLCJwYXRobmFtZSIsImpzb25EYXRhIiwiYXBpRmFpbEVsZW1lbnQiLCJmZXRjaGluZ0VsZW1lbnQiLCJub1Jlc3VsdHNFbGVtZW50IiwiZ2V0SlNPTiIsImZhaWwiLCJhbHdheXMiLCJwYXJlbnQiLCJoaWRlIiwiaWQiLCJ0eXBlIiwicHJlcGVuZCIsInRleHQiLCJhdHRyIiwidmFsIiwicHJvcCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJzaG93Iiwib24iLCJwb3N0SWQiLCJ0aGlzIiwiZW1wdHkiLCJjbGljayIsImtleXVwIiwi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VixFQUFVLFVBQVkwQixFQUFRLFNBQVdwRCxHQUNoREcsRUFBRyxVQUFXbUQsUUFBUWxELE9BQVFNLGFBQWNWLE1BR2hERyxFQUFHLGdCQUFpQm9ELE1BQU8sV0FDdkJwRCxFQUFHLGtCQUFtQnFDLFdBSTlCckMsRUFBRyxpQkFBa0JxRCxNQUFPLFdBQ3hCLElBQUlDLEVBQWN0RCxFQUFHa0QsTUFBT1AsTUFBTVksY0FFbEN2RCxFQUFHLHVCQUF3QjZDLFlBQWEsWUFDeEM3QyxFQUFHLGNBQWVtRCxRQUVsQnRCLEVBQVMvQixRQUFTLFNBQVdDLEdBQ3BCQSxFQUFRTSxNQUFNa0QsY0FBY0MsUUFBU0YsSUFBaUIsR0FDdkR0RCxFQUFHLGNBQWVDLE9BQVFDLFdBQVlILE1BSXpDQyxFQUFHLGNBQWV5RCxHQUFJLFdBQ3ZCekQsRUFBRyxjQUFlQyxPQUFRTSxhQUFjeUIsSUFHNUNoQyxFQUFHLHVCQUF3Qm9ELE1BQU8sV0FDOUJwRCxFQUFHa0QsTUFBT0osU0FBVSxZQUNwQjlDLEVBQUcsaUJBQWtCMkMsSUFBSyxJQUMxQjNDLEVBQUcsY0FBZW1ELFFBQ2xCdkQsV0FBWWlDLEtBR0ksSUFBZnlCLEdBQ0R0RCxFQUFHLHVCQUF3QjhDLFNBQVUiLCJmaWxlIjoiamF2YXNjcmlwdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xOTQ5MTMzNi9nZXQtdXJsLXBhcmFtZXRlci1qcXVlcnktb3ItaG93LXRvLWdldC1xdWVyeS1zdHJpbmctdmFsdWVzLWluLWpzXG5mdW5jdGlvbiBnZXRVcmxQYXJhbWV0ZXIoc1BhcmFtKSB7XG4gICAgdmFyIHNQYWdlVVJMID0gZGVjb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyaW5nKDEpKSxcbiAgICAgICAgc1VSTFZhcmlhYmxlcyA9IHNQYWdlVVJMLnNwbGl0KCcmJyksXG4gICAgICAgIHNQYXJhbWV0ZXJOYW1lLFxuICAgICAgICBpO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IHNVUkxWYXJpYWJsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc1BhcmFtZXRlck5hbWUgPSBzVVJMVmFyaWFibGVzW2ldLnNwbGl0KCc9Jyk7XG5cbiAgICAgICAgaWYgKHNQYXJhbWV0ZXJOYW1lWzBdID09PSBzUGFyYW0pIHtcbiAgICAgICAgICAgIHJldHVybiBzUGFyYW1ldGVyTmFtZVsxXSA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IHNQYXJhbWV0ZXJOYW1lWzFdO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9tYXBzL2RvY3VtZW50YXRpb24vamF2YXNjcmlwdC9hZGRpbmctYS1nb29nbGUtbWFwXG5mdW5jdGlvbiBpbml0TWFwKCkge1xuICAgIHZhciBrZWEgICAgPSB7XG4gICAgICAgIGxhdDogNTUuNzAzOTQ1OTk5OTk5OTksXG4gICAgICAgIGxuZzogMTIuNTM3NDkzMDAwMDAwMDQgfTtcbiAgICB2YXIgbWFwICAgID0gbmV3IGdvb2dsZS5tYXBzLk1hcCggZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICdtYXAnICksIHtcbiAgICAgICAgem9vbTogICAxMCxcbiAgICAgICAgY2VudGVyOiBrZWEgfSApO1xuICAgIHZhciBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKCB7XG4gICAgICAgIHBvc2l0aW9uOiBrZWEsXG4gICAgICAgIG1hcDogICAgICBtYXAgfSApO1xufVxuZnVuY3Rpb24gY3JlYXRlRGVjayggZGF0YSApIHtcbiAgICBkYXRhLmZvckVhY2goIGZ1bmN0aW9uICggZWxlbWVudCApIHtcbiAgICAgICAgJCggJyNtYWluLWRlY2snICkuYXBwZW5kKCBjYXJkTm9Cb2R5KCBlbGVtZW50ICkgKTtcbiAgICB9ICk7XG59O1xuXG5mdW5jdGlvbiBjYXJkTm9Cb2R5KCBlbGVtZW50ICkge1xuICAgIHZhciBodG1sID0gJzxkaXYgY2xhc3M9XCJjYXJkIGZhZGVJblVwIHBvaW50ZXIgY2xpY2thYmxlXCIgZGF0YS1pZD1cIicgKyBlbGVtZW50Ll9pZCArICdcIj4nO1xuICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cImNhcmQtaGVhZGVyXCI+JztcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8aSBjbGFzcz1cImZhIGZhLWFuZ2xlLXJpZ2h0IGZhLTN4XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPic7XG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPGgzPicgKyBlbGVtZW50LnRpdGxlICsgJzwvaDM+JztcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8cCBjbGFzcz1cInNlY29uZGFyeVwiPicgKyBkYXRlRnJvbU9iamVjdElkKCBlbGVtZW50Ll9pZCApICsgJzwvcD4nO1xuICAgICAgICAgICAgaHRtbCArPSAnPC9kaXY+JztcbiAgICAgICAgaHRtbCArPSAnPC9kaXY+JztcbiAgICByZXR1cm4gaHRtbDtcbn07XG5cbmZ1bmN0aW9uIGNhcmRXaXRoQm9keSggZWxlbWVudCApIHtcbiAgICB2YXIgaHRtbCA9ICc8ZGl2IGNsYXNzPVwiY2FyZFwiPic7XG4gICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJjYXJkLWhlYWRlclwiPic7XG4gICAgICAgICAgICBodG1sICs9ICc8aDM+JyArIGVsZW1lbnQudGl0bGUgKyAnPC9oMz4nO1xuICAgICAgICAgICAgaWYgKCBlbGVtZW50Ll9pZCAhPSBudWxsICkge1xuICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxwIGNsYXNzPVwic2Vjb25kYXJ5XCI+JyArIGRhdGVGcm9tT2JqZWN0SWQoIGVsZW1lbnQuX2lkICkgKyAnPC9wPic7XG4gICAgICAgICAgICB9XG4gICAgICAgIGh0bWwgKz0gJzwvZGl2Pic7XG5cbiAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cImNhcmQtYm9keVwiPic7XG4gICAgICAgICAgICBodG1sICs9ICc8cD4nICsgZWxlbWVudC5ib2R5ICsgJzwvcD4nO1xuICAgICAgICBodG1sICs9ICc8L2Rpdj4nO1xuXG4gICAgICAgIGlmICggZWxlbWVudC5faWQgIT0gbnVsbCApIHtcbiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJjYXJkLWZvb3RlclwiPic7XG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPGEgaHJlZj1cIi9mb3JtP2lkPScgKyBlbGVtZW50Ll9pZCArICcmdHlwZT11cGRhdGVcIiBjbGFzcz1cImJ0biBidG4tc3VjY2Vzc1wiPic7XG4gICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxpIGNsYXNzPVwiZmEgZmEtcGVuY2lsXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPiBFZGl0JztcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8L2E+JztcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8YSBocmVmPVwiL3Bvc3RzLycgKyBlbGVtZW50Ll9pZCArICdcIiBjbGFzcz1cImJ0biBidG4td2FybmluZ1wiPic7XG4gICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxpIGNsYXNzPVwiZmEgZmEtZmlsZS1vXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPiBKU09OJztcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8L2E+JztcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8YSBocmVmPVwiL2Zvcm0/aWQ9JyArIGVsZW1lbnQuX2lkICsgJyZ0eXBlPWRlbGV0ZVwiIGNsYXNzPVwiYnRuIGJ0bi1kYW5nZXJcIj4nO1xuICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8aSBjbGFzcz1cImZhIGZhLXRyYXNoLW9cIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+IERlbGV0ZSc7XG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPC9hPic7XG4gICAgICAgICAgICBodG1sICs9ICc8L2Rpdj4nO1xuICAgICAgICB9XG4gICAgaHRtbCArPSAnPC9kaXY+JztcblxuICAgIHJldHVybiBodG1sO1xufTtcblxuZnVuY3Rpb24gZGF0ZUZyb21PYmplY3RJZCggb2JqZWN0SWQgKSB7XG4gICAgdmFyIGRhdGVPYmplY3QgPSBuZXcgRGF0ZSggcGFyc2VJbnQoIG9iamVjdElkLnN1YnN0cmluZyggMCwgOCApLCAxNiApICogMTAwMCApO1xuICAgIHZhciBtb250aCA9IFsgJ0phbnVhcnknLCAnRmVicnVhcnknLCAnTWFyY2gnLCAnQXByaWwnLCAnTWF5JywgJ0p1bmUnLCBcbiAgICAgICAgICAgICAgICAgICdKdWx5JywgJ0F1Z3VzdCcsICdTZXB0ZW1iZXInLCAnT2N0b2JlcicsICdOb3ZlbWJlcicsICdEZWNlbWJlcicgXTtcblxuICAgIHZhciBzdHIgPSBtb250aFsgZGF0ZU9iamVjdC5nZXRNb250aCgpIF0gKyAnICc7XG4gICAgICAgIHN0ciArPSBkYXRlT2JqZWN0LmdldERhdGUoKSArICcgJztcbiAgICAgICAgc3RyICs9IGRhdGVPYmplY3QuZ2V0RnVsbFllYXIoKSArICcsICc7XG4gICAgICAgIHN0ciArPSBhZGRMZWFkaW5nWmVybyggZGF0ZU9iamVjdC5nZXRIb3VycygpICkgKyAnOic7XG4gICAgICAgIHN0ciArPSBhZGRMZWFkaW5nWmVybyggZGF0ZU9iamVjdC5nZXRNaW51dGVzKCkgKSArICc6JztcbiAgICAgICAgc3RyICs9IGFkZExlYWRpbmdaZXJvKCBkYXRlT2JqZWN0LmdldFNlY29uZHMoKSApO1xuXG4gICAgcmV0dXJuIHN0cjtcbn07XG5cbmZ1bmN0aW9uIGFkZExlYWRpbmdaZXJvKCBudW1iZXIgKSB7XG4gICAgaWYoIG51bWJlci50b1N0cmluZygpLmxlbmd0aCA9PSAxICkge1xuICAgICAgICBudW1iZXIgPSAnMCcgKyBudW1iZXI7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bWJlcjtcbn07XG4kKCBmdW5jdGlvbigpIHtcbiAgICB2YXIgcm9vdFVSTCAgICAgICAgICA9IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArICcvLycgKyB3aW5kb3cubG9jYXRpb24uaG9zdCxcbiAgICAgICAgcGF0aE5hbWUgICAgICAgICA9IHRvcC5sb2NhdGlvbi5wYXRobmFtZSxcbiAgICAgICAganNvbkRhdGEgICAgICAgICA9ICcnLFxuICAgICAgICBhcGlGYWlsRWxlbWVudCAgID0geyAndGl0bGUnOiAnU29ycnksIHdlIGRpZCBub3QgZmluZCBhbnl0aGluZy4uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2JvZHknOiAgJ0NvbnRhY3Qgc29tZWJvZHkgaWYgdGhpcyBrZWVwcyBvbiBoYXBwZW5pbmcuLicgfSxcbiAgICAgICAgZmV0Y2hpbmdFbGVtZW50ICA9IHsgJ3RpdGxlJzogJ0ZldGNoaW5nIERhdGEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYm9keSc6ICAnPGltZyBzcmM9XCJpbWdzL2xvYWRlci5naWZcIiBhbHQ9XCJMb2FkaW5nLi4uXCIgaWQ9XCJsb2FkZXJcIj4nIH0sXG4gICAgICAgIG5vUmVzdWx0c0VsZW1lbnQgPSB7ICd0aXRsZSc6ICdObyByZXN1bHRzLicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICdib2R5JzogICdTb3JyeSwgYnV0IHdlIGNvdWxkblxcJ3QgZmluZCBhbnl0aGluZyBtYXRjaGluZyB0aGUgc2VhcmNoIHN0cmluZy48YnI+UHJlc3MgdGhlIDxpIGNsYXNzPVwiZmEgZmEtdGltZXNcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+IG9yIHR5cGUgc29tZXRoaW5nIGVsc2UuJyB9O1xuXG4gICAgaWYgKCBwYXRoTmFtZSA9PT0gJy8nICkge1xuICAgICAgICAkLmdldEpTT04oIHJvb3RVUkwgKyAnL3Bvc3RzLycsIGZ1bmN0aW9uICggZGF0YSApIHtcbiAgICAgICAgICAgIGpzb25EYXRhID0gZGF0YTtcbiAgICAgICAgICAgIGNyZWF0ZURlY2soIGpzb25EYXRhICk7XG4gICAgICAgIH0gKS5mYWlsKCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoICcjbWFpbi1kZWNrJyApLmFwcGVuZCggY2FyZFdpdGhCb2R5KCBhcGlGYWlsRWxlbWVudCApICk7XG4gICAgICAgIH0gKS5hbHdheXMoIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCggJyNsb2FkZXInICkucGFyZW50KCkuaGlkZSgpO1xuICAgICAgICB9ICk7XG4gICAgfSBlbHNlIGlmICggcGF0aE5hbWUgPT09ICcvZm9ybScgKSB7XG4gICAgICAgIHZhciBpZCAgID0gZ2V0VXJsUGFyYW1ldGVyKCAnaWQnICksXG4gICAgICAgICAgICB0eXBlID0gZ2V0VXJsUGFyYW1ldGVyKCAndHlwZScgKTtcblxuICAgICAgICAkKCAnI2Zvcm0nICkuaGlkZSgpO1xuXG4gICAgICAgIGlmICggdHlwZSA9PT0gJ3VwZGF0ZScgKSB7XG4gICAgICAgICAgICAkKCAnI2Zvcm0taGVhZGVyJyApLnByZXBlbmQoICdVcGRhdGUgJyApO1xuICAgICAgICAgICAgJCggJyNmb3JtLXN1Yi1oZWFkZXInICkudGV4dCggJ1VwZGF0ZSB0aGUgZm9sbG93aW5nIHBvc3QnICk7XG4gICAgICAgICAgICAkKCAnI2Zvcm0nICkuYXR0cignYWN0aW9uJywgJy9wb3N0cy8nICsgaWQgKyAnP19tZXRob2Q9cHV0Jyk7XG4gICAgICAgIH0gZWxzZSBpZiAoIHR5cGUgPT09ICdkZWxldGUnICkge1xuICAgICAgICAgICAgJCggJyNmb3JtLWhlYWRlcicgKS5wcmVwZW5kKCAnRGVsZXRlICcgKTtcbiAgICAgICAgICAgICQoICcjZm9ybS1zdWItaGVhZGVyJyApLnRleHQoICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoZSBmb2xsb3dpbmcgcG9zdD8nICk7XG4gICAgICAgICAgICAkKCAnI2Zvcm0nICkuYXR0cignYWN0aW9uJywgJy9wb3N0cy8nICsgaWQgKyAnP19tZXRob2Q9ZGVsZXRlJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKCAnI2Zvcm0taGVhZGVyJyApLnByZXBlbmQoICdDcmVhdGUgJyApO1xuICAgICAgICAgICAgJCggJyNmb3JtLXN1Yi1oZWFkZXInICkudGV4dCggJ0NyZWF0ZSBhIG5ldyBwb3N0JyApO1xuICAgICAgICAgICAgJCggJyNmb3JtJyApLmF0dHIoJ2FjdGlvbicsICcvcG9zdHMnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICggaWQgIT0gbnVsbCApIHtcbiAgICAgICAgICAgICQuZ2V0SlNPTiggcm9vdFVSTCArICcvcG9zdHMvJyArIGlkLCBmdW5jdGlvbiAoIGVsZW1lbnQgKSB7XG4gICAgICAgICAgICAgICAgJCggJyN0aXRsZScgKS52YWwoIGVsZW1lbnQudGl0bGUgKTtcbiAgICAgICAgICAgICAgICAkKCAnI2JvZHknICkudmFsKCBlbGVtZW50LmJvZHkgKTtcblxuICAgICAgICAgICAgICAgIGlmICggdHlwZSA9PT0gJ3VwZGF0ZScgKSB7XG4gICAgICAgICAgICAgICAgICAgICQoICcjc3VibWl0JyApLmF0dHIoICd2YWx1ZScsICdFZGl0JyApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHR5cGUgPT09ICdkZWxldGUnICkge1xuICAgICAgICAgICAgICAgICAgICAkKCAnI3RpdGxlLCAjYm9keScgKS5wcm9wKCAnZGlzYWJsZWQnLCB0cnVlICk7XG4gICAgICAgICAgICAgICAgICAgICQoICcjc3VibWl0JyApLnJlbW92ZUNsYXNzKCAnYnRuLXN1Y2Nlc3MnICkuYWRkQ2xhc3MoICdidG4tZGFuZ2VyJyApLmF0dHIoICd2YWx1ZScsICdEZWxldGUnICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSApO1xuICAgICAgICB9XG5cbiAgICAgICAgJCggJyNsb2FkZXInICkuaGlkZSgpO1xuICAgICAgICAkKCAnI2Zvcm0nICkuc2hvdygpO1xuICAgIH1cblxuICAgICQoICcjbWFpbi1kZWNrJyApLm9uKCAnY2xpY2snLCAnLmNsaWNrYWJsZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBvc3RJZCAgPSAkKCB0aGlzICkuYXR0ciggJ2RhdGEtaWQnICk7XG5cbiAgICAgICAgJCggJy5tb2RhbCcgKS5lbXB0eSgpLmFwcGVuZCggY2FyZFdpdGhCb2R5KCBmZXRjaGluZ0VsZW1lbnQgKSApO1xuICAgICAgICAkKCAnI21vZGFsLW92ZXJsYXknICkuc2hvdygpO1xuXG4gICAgICAgICQuZ2V0SlNPTiggcm9vdFVSTCArICcvcG9zdHMvJyArIHBvc3RJZCwgZnVuY3Rpb24gKCBkYXRhICkge1xuICAgICAgICAgICAgJCggJy5tb2RhbCcgKS5lbXB0eSgpLmFwcGVuZCggY2FyZFdpdGhCb2R5KCBkYXRhICkgKTtcbiAgICAgICAgfSApO1xuXG4gICAgICAgICQoICcubW9kYWwtY2xvc2UnICkuY2xpY2soIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCggJyNtb2RhbC1vdmVybGF5JyApLmhpZGUoKTtcbiAgICAgICAgfSApO1xuICAgIH0gKTtcbiAgICBcbiAgICAkKCAnI3NlYXJjaC1maWVsZCcgKS5rZXl1cCggZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBzZWFyY2hJbnB1dCA9ICQoIHRoaXMgKS52YWwoKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgICQoICcjY2xlYXItc2VhcmNoLWZpZWxkJyApLnJlbW92ZUNsYXNzKCAnZGlzYWJsZWQnICk7XG4gICAgICAgICQoICcjbWFpbi1kZWNrJyApLmVtcHR5KCk7XG5cbiAgICAgICAganNvbkRhdGEuZm9yRWFjaCggZnVuY3Rpb24gKCBlbGVtZW50ICkge1xuICAgICAgICAgICAgaWYgKCBlbGVtZW50LnRpdGxlLnRvTG93ZXJDYXNlKCkuaW5kZXhPZiggc2VhcmNoSW5wdXQgKSA+PSAwICkge1xuICAgICAgICAgICAgICAgICQoICcjbWFpbi1kZWNrJyApLmFwcGVuZCggY2FyZE5vQm9keSggZWxlbWVudCApICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gKTtcblxuICAgICAgICBpZiAoICQoICcjbWFpbi1kZWNrJyApLmlzKCAnOmVtcHR5JyApICkge1xuICAgICAgICAgICAgJCggJyNtYWluLWRlY2snICkuYXBwZW5kKCBjYXJkV2l0aEJvZHkoIG5vUmVzdWx0c0VsZW1lbnQgKSApO1xuICAgICAgICB9XG5cbiAgICAgICAgJCggJyNjbGVhci1zZWFyY2gtZmllbGQnICkuY2xpY2soIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCggdGhpcyApLmFkZENsYXNzKCAnZGlzYWJsZWQnICk7XG4gICAgICAgICAgICAkKCAnI3NlYXJjaC1maWVsZCcgKS52YWwoICcnICk7XG4gICAgICAgICAgICAkKCAnI21haW4tZGVjaycgKS5lbXB0eSgpO1xuICAgICAgICAgICAgY3JlYXRlRGVjaygganNvbkRhdGEgKTtcbiAgICAgICAgfSApO1xuXG4gICAgICAgIGlmICggc2VhcmNoSW5wdXQgPT0gJycgKSB7XG4gICAgICAgICAgICAkKCAnI2NsZWFyLXNlYXJjaC1maWVsZCcgKS5hZGRDbGFzcyggJ2Rpc2FibGVkJyApO1xuICAgICAgICB9XG4gICAgfSApO1xufSApOyJdfQ==
