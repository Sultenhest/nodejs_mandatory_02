function getUrlParameter(e){var a,t,d=decodeURIComponent(window.location.search.substring(1)).split("&");for(t=0;t<d.length;t++)if((a=d[t].split("="))[0]===e)return void 0===a[1]||a[1]}function initMap(){var e={lat:55.70394599999999,lng:12.53749300000004},a=new google.maps.Map(document.getElementById("map"),{zoom:10,center:e});new google.maps.Marker({position:e,map:a})}function createDeck(e){e.forEach(function(e){$("#main-deck").append(cardNoBody(e))})}function cardNoBody(e){var a='<div class="card fadeInUp pointer clickable" data-id="'+e._id+'">';return a+='<div class="card-header">',a+='<i class="fa fa-angle-right fa-3x" aria-hidden="true"></i>',a+="<h3>"+e.title+"</h3>",a+='<p class="secondary">'+dateFromObjectId(e._id)+"</p>",a+="</div>",a+="</div>"}function cardWithBody(e){var a='<div class="card">';return a+='<div class="card-header">',a+="<h3>"+e.title+"</h3>",null!=e._id&&(a+='<p class="secondary">'+dateFromObjectId(e._id)+"</p>"),a+="</div>",a+='<div class="card-body">',a+="<p>"+e.body+"</p>",a+="</div>",null!=e._id&&(a+='<div class="card-footer">',a+='<a href="/form?id='+e._id+'&type=update" class="btn btn-success">Edit</a>',a+='<a href="/form?id='+e._id+'&type=delete" class="btn btn-danger">Delete</a>',a+="</div>"),a+="</div>"}function dateFromObjectId(e){var a=new Date(1e3*parseInt(e.substring(0,8),16)),t=["January","February","March","April","May","June","July","August","September","October","November","December"][a.getMonth()]+" ";return t+=a.getDate()+" ",t+=a.getFullYear()+", ",t+=addLeadingZero(a.getHours())+":",t+=addLeadingZero(a.getMinutes())+":",t+=addLeadingZero(a.getSeconds())}function addLeadingZero(e){return 1==e.toString().length&&(e="0"+e),e}$(function(){var e=window.location.protocol+"//"+window.location.host,a=top.location.pathname,t="",d={title:"Sorry, we did not find anything..",body:"Contact somebody if this keeps on happening.."},i={title:"Fetching Data",body:'<img src="imgs/loader.gif" alt="Loading..." id="loader">'},r={title:"No results.",body:'Sorry, but we couldn\'t find anything matching the search string.<br>Press the <i class="fa fa-times" aria-hidden="true"></i> or type something else.'};if("/"===a)$.getJSON(e+"/posts/",function(e){createDeck(t=e)}).fail(function(){$("#main-deck").append(cardWithBody(d))}).always(function(){$("#loader").parent().hide()});else if("/form"===a){var o=getUrlParameter("id"),n=getUrlParameter("type");$("#form").hide(),"update"===n?($("#form-header").prepend("Update "),$("#form").attr("action","/posts/"+o+"?_method=put")):"delete"===n?($("#form-header").prepend("Delete "),$("#form").attr("action","/posts/"+o+"?_method=delete")):($("#form-header").prepend("Create "),$("#form").attr("action","/posts")),null!=o&&$.getJSON(e+"/posts/"+o,function(e){$("#title").val(e.title),$("#body").val(e.body),"update"===n?$("#submit").attr("value","Edit"):"delete"===n&&($("#title, #body").prop("disabled",!0),$("#submit").removeClass("btn-success").addClass("btn-danger").attr("value","Delete"))}),$("#loader").hide(),$("#form").show()}$("#main-deck").on("click",".clickable",function(){var a=$(this).attr("data-id");$(".modal").empty().append(cardWithBody(i)),$("#modal-overlay").show(),$.getJSON(e+"/posts/"+a,function(e){$(".modal").empty().append(cardWithBody(e))}),$(".modal-close").click(function(){$("#modal-overlay").hide()})}),$("#search-field").keyup(function(){var e=$(this).val().toLowerCase();$("#clear-search-field").removeClass("disabled"),$("#main-deck").empty(),t.forEach(function(a){a.title.toLowerCase().indexOf(e)>=0&&$("#main-deck").append(cardNoBody(a))}),$("#main-deck").is(":empty")&&$("#main-deck").append(cardWithBody(r)),$("#clear-search-field").click(function(){$(this).addClass("disabled"),$("#search-field").val(""),$("#main-deck").empty(),createDeck(t)}),""==e&&$("#clear-search-field").addClass("disabled")})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImphdmFzY3JpcHQuanMiXSwibmFtZXMiOlsiZ2V0VXJsUGFyYW1ldGVyIiwic1BhcmFtIiwic1BhcmFtZXRlck5hbWUiLCJpIiwic1VSTFZhcmlhYmxlcyIsImRlY29kZVVSSUNvbXBvbmVudCIsIndpbmRvdyIsImxvY2F0aW9uIiwic2VhcmNoIiwic3Vic3RyaW5nIiwic3BsaXQiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJpbml0TWFwIiwia2VhIiwibGF0IiwibG5nIiwibWFwIiwiZ29vZ2xlIiwibWFwcyIsIk1hcCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ6b29tIiwiY2VudGVyIiwiTWFya2VyIiwicG9zaXRpb24iLCJjcmVhdGVEZWNrIiwiZGF0YSIsImZvckVhY2giLCJlbGVtZW50IiwiJCIsImFwcGVuZCIsImNhcmROb0JvZHkiLCJodG1sIiwiX2lkIiwidGl0bGUiLCJkYXRlRnJvbU9iamVjdElkIiwiY2FyZFdpdGhCb2R5IiwiYm9keSIsIm9iamVjdElkIiwiZGF0ZU9iamVjdCIsIkRhdGUiLCJwYXJzZUludCIsInN0ciIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsImdldEZ1bGxZZWFyIiwiYWRkTGVhZGluZ1plcm8iLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJnZXRTZWNvbmRzIiwibnVtYmVyIiwidG9TdHJpbmciLCJyb290VVJMIiwicHJvdG9jb2wiLCJob3N0IiwicGF0aE5hbWUiLCJ0b3AiLCJwYXRobmFtZSIsImpzb25EYXRhIiwiYXBpRmFpbEVsZW1lbnQiLCJmZXRjaGluZ0VsZW1lbnQiLCJub1Jlc3VsdHNFbGVtZW50IiwiZ2V0SlNPTiIsImZhaWwiLCJhbHdheXMiLCJwYXJlbnQiLCJoaWRlIiwiaWQiLCJ0eXBlIiwicHJlcGVuZCIsImF0dHIiLCJ2YWwiLCJwcm9wIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsInNob3ciLCJvbiIsInBvc3RJZCIsInRoaXMiLCJlbXB0eSIsImNsaWNrIiwia2V5dXAiLCJzZWFyY2hJ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QUF3QjRDLFlBQWEsWUFDeEM1QyxFQUFHLGNBQWVrRCxRQUVsQnJCLEVBQVMvQixRQUFTLFNBQVdDLEdBQ3BCQSxFQUFRTSxNQUFNaUQsY0FBY0MsUUFBU0YsSUFBaUIsR0FDdkRyRCxFQUFHLGNBQWVDLE9BQVFDLFdBQVlILE1BSXpDQyxFQUFHLGNBQWV3RCxHQUFJLFdBQ3ZCeEQsRUFBRyxjQUFlQyxPQUFRTSxhQUFjeUIsSUFHNUNoQyxFQUFHLHVCQUF3Qm1ELE1BQU8sV0FDOUJuRCxFQUFHaUQsTUFBT0osU0FBVSxZQUNwQjdDLEVBQUcsaUJBQWtCMEMsSUFBSyxJQUMxQjFDLEVBQUcsY0FBZWtELFFBQ2xCdEQsV0FBWWlDLEtBR0ksSUFBZndCLEdBQ0RyRCxFQUFHLHVCQUF3QjZDLFNBQVUiLCJmaWxlIjoiamF2YXNjcmlwdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xOTQ5MTMzNi9nZXQtdXJsLXBhcmFtZXRlci1qcXVlcnktb3ItaG93LXRvLWdldC1xdWVyeS1zdHJpbmctdmFsdWVzLWluLWpzXG5mdW5jdGlvbiBnZXRVcmxQYXJhbWV0ZXIoc1BhcmFtKSB7XG4gICAgdmFyIHNQYWdlVVJMID0gZGVjb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyaW5nKDEpKSxcbiAgICAgICAgc1VSTFZhcmlhYmxlcyA9IHNQYWdlVVJMLnNwbGl0KCcmJyksXG4gICAgICAgIHNQYXJhbWV0ZXJOYW1lLFxuICAgICAgICBpO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IHNVUkxWYXJpYWJsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc1BhcmFtZXRlck5hbWUgPSBzVVJMVmFyaWFibGVzW2ldLnNwbGl0KCc9Jyk7XG5cbiAgICAgICAgaWYgKHNQYXJhbWV0ZXJOYW1lWzBdID09PSBzUGFyYW0pIHtcbiAgICAgICAgICAgIHJldHVybiBzUGFyYW1ldGVyTmFtZVsxXSA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IHNQYXJhbWV0ZXJOYW1lWzFdO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9tYXBzL2RvY3VtZW50YXRpb24vamF2YXNjcmlwdC9hZGRpbmctYS1nb29nbGUtbWFwXG5mdW5jdGlvbiBpbml0TWFwKCkge1xuICAgIHZhciBrZWEgICAgPSB7XG4gICAgICAgIGxhdDogNTUuNzAzOTQ1OTk5OTk5OTksXG4gICAgICAgIGxuZzogMTIuNTM3NDkzMDAwMDAwMDQgfTtcbiAgICB2YXIgbWFwICAgID0gbmV3IGdvb2dsZS5tYXBzLk1hcCggZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICdtYXAnICksIHtcbiAgICAgICAgem9vbTogICAxMCxcbiAgICAgICAgY2VudGVyOiBrZWEgfSApO1xuICAgIHZhciBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKCB7XG4gICAgICAgIHBvc2l0aW9uOiBrZWEsXG4gICAgICAgIG1hcDogICAgICBtYXAgfSApO1xufVxuZnVuY3Rpb24gY3JlYXRlRGVjayggZGF0YSApIHtcbiAgICBkYXRhLmZvckVhY2goIGZ1bmN0aW9uICggZWxlbWVudCApIHtcbiAgICAgICAgJCggJyNtYWluLWRlY2snICkuYXBwZW5kKCBjYXJkTm9Cb2R5KCBlbGVtZW50ICkgKTtcbiAgICB9ICk7XG59O1xuXG5mdW5jdGlvbiBjYXJkTm9Cb2R5KCBlbGVtZW50ICkge1xuICAgIHZhciBodG1sID0gJzxkaXYgY2xhc3M9XCJjYXJkIGZhZGVJblVwIHBvaW50ZXIgY2xpY2thYmxlXCIgZGF0YS1pZD1cIicgKyBlbGVtZW50Ll9pZCArICdcIj4nO1xuICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cImNhcmQtaGVhZGVyXCI+JztcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8aSBjbGFzcz1cImZhIGZhLWFuZ2xlLXJpZ2h0IGZhLTN4XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPic7XG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPGgzPicgKyBlbGVtZW50LnRpdGxlICsgJzwvaDM+JztcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8cCBjbGFzcz1cInNlY29uZGFyeVwiPicgKyBkYXRlRnJvbU9iamVjdElkKCBlbGVtZW50Ll9pZCApICsgJzwvcD4nO1xuICAgICAgICAgICAgaHRtbCArPSAnPC9kaXY+JztcbiAgICAgICAgaHRtbCArPSAnPC9kaXY+JztcbiAgICByZXR1cm4gaHRtbDtcbn07XG5cbmZ1bmN0aW9uIGNhcmRXaXRoQm9keSggZWxlbWVudCApIHtcbiAgICB2YXIgaHRtbCA9ICc8ZGl2IGNsYXNzPVwiY2FyZFwiPic7XG4gICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJjYXJkLWhlYWRlclwiPic7XG4gICAgICAgICAgICBodG1sICs9ICc8aDM+JyArIGVsZW1lbnQudGl0bGUgKyAnPC9oMz4nO1xuICAgICAgICAgICAgaWYgKCBlbGVtZW50Ll9pZCAhPSBudWxsICkge1xuICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxwIGNsYXNzPVwic2Vjb25kYXJ5XCI+JyArIGRhdGVGcm9tT2JqZWN0SWQoIGVsZW1lbnQuX2lkICkgKyAnPC9wPic7XG4gICAgICAgICAgICB9XG4gICAgICAgIGh0bWwgKz0gJzwvZGl2Pic7XG5cbiAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cImNhcmQtYm9keVwiPic7XG4gICAgICAgICAgICBodG1sICs9ICc8cD4nICsgZWxlbWVudC5ib2R5ICsgJzwvcD4nO1xuICAgICAgICBodG1sICs9ICc8L2Rpdj4nO1xuXG4gICAgICAgIGlmICggZWxlbWVudC5faWQgIT0gbnVsbCApIHtcbiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJjYXJkLWZvb3RlclwiPic7XG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPGEgaHJlZj1cIi9mb3JtP2lkPScgKyBlbGVtZW50Ll9pZCArICcmdHlwZT11cGRhdGVcIiBjbGFzcz1cImJ0biBidG4tc3VjY2Vzc1wiPkVkaXQ8L2E+JztcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8YSBocmVmPVwiL2Zvcm0/aWQ9JyArIGVsZW1lbnQuX2lkICsgJyZ0eXBlPWRlbGV0ZVwiIGNsYXNzPVwiYnRuIGJ0bi1kYW5nZXJcIj5EZWxldGU8L2E+JztcbiAgICAgICAgICAgIGh0bWwgKz0gJzwvZGl2Pic7XG4gICAgICAgIH1cbiAgICBodG1sICs9ICc8L2Rpdj4nO1xuXG4gICAgcmV0dXJuIGh0bWw7XG59O1xuXG5mdW5jdGlvbiBkYXRlRnJvbU9iamVjdElkKCBvYmplY3RJZCApIHtcbiAgICB2YXIgZGF0ZU9iamVjdCA9IG5ldyBEYXRlKCBwYXJzZUludCggb2JqZWN0SWQuc3Vic3RyaW5nKCAwLCA4ICksIDE2ICkgKiAxMDAwICk7XG4gICAgdmFyIG1vbnRoID0gWyAnSmFudWFyeScsICdGZWJydWFyeScsICdNYXJjaCcsICdBcHJpbCcsICdNYXknLCAnSnVuZScsIFxuICAgICAgICAgICAgICAgICAgJ0p1bHknLCAnQXVndXN0JywgJ1NlcHRlbWJlcicsICdPY3RvYmVyJywgJ05vdmVtYmVyJywgJ0RlY2VtYmVyJyBdO1xuXG4gICAgdmFyIHN0ciA9IG1vbnRoWyBkYXRlT2JqZWN0LmdldE1vbnRoKCkgXSArICcgJztcbiAgICAgICAgc3RyICs9IGRhdGVPYmplY3QuZ2V0RGF0ZSgpICsgJyAnO1xuICAgICAgICBzdHIgKz0gZGF0ZU9iamVjdC5nZXRGdWxsWWVhcigpICsgJywgJztcbiAgICAgICAgc3RyICs9IGFkZExlYWRpbmdaZXJvKCBkYXRlT2JqZWN0LmdldEhvdXJzKCkgKSArICc6JztcbiAgICAgICAgc3RyICs9IGFkZExlYWRpbmdaZXJvKCBkYXRlT2JqZWN0LmdldE1pbnV0ZXMoKSApICsgJzonO1xuICAgICAgICBzdHIgKz0gYWRkTGVhZGluZ1plcm8oIGRhdGVPYmplY3QuZ2V0U2Vjb25kcygpICk7XG5cbiAgICByZXR1cm4gc3RyO1xufTtcblxuZnVuY3Rpb24gYWRkTGVhZGluZ1plcm8oIG51bWJlciApIHtcbiAgICBpZiggbnVtYmVyLnRvU3RyaW5nKCkubGVuZ3RoID09IDEgKSB7XG4gICAgICAgIG51bWJlciA9ICcwJyArIG51bWJlcjtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVtYmVyO1xufTtcbiQoIGZ1bmN0aW9uKCkge1xuICAgIHZhciByb290VVJMICAgICAgICAgID0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0LFxuICAgICAgICBwYXRoTmFtZSAgICAgICAgID0gdG9wLmxvY2F0aW9uLnBhdGhuYW1lLFxuICAgICAgICBqc29uRGF0YSAgICAgICAgID0gJycsXG4gICAgICAgIGFwaUZhaWxFbGVtZW50ICAgPSB7ICd0aXRsZSc6ICdTb3JyeSwgd2UgZGlkIG5vdCBmaW5kIGFueXRoaW5nLi4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYm9keSc6ICAnQ29udGFjdCBzb21lYm9keSBpZiB0aGlzIGtlZXBzIG9uIGhhcHBlbmluZy4uJyB9LFxuICAgICAgICBmZXRjaGluZ0VsZW1lbnQgID0geyAndGl0bGUnOiAnRmV0Y2hpbmcgRGF0YScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICdib2R5JzogICc8aW1nIHNyYz1cImltZ3MvbG9hZGVyLmdpZlwiIGFsdD1cIkxvYWRpbmcuLi5cIiBpZD1cImxvYWRlclwiPicgfSxcbiAgICAgICAgbm9SZXN1bHRzRWxlbWVudCA9IHsgJ3RpdGxlJzogJ05vIHJlc3VsdHMuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2JvZHknOiAgJ1NvcnJ5LCBidXQgd2UgY291bGRuXFwndCBmaW5kIGFueXRoaW5nIG1hdGNoaW5nIHRoZSBzZWFyY2ggc3RyaW5nLjxicj5QcmVzcyB0aGUgPGkgY2xhc3M9XCJmYSBmYS10aW1lc1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4gb3IgdHlwZSBzb21ldGhpbmcgZWxzZS4nIH07XG5cbiAgICBpZiAoIHBhdGhOYW1lID09PSAnLycgKSB7XG4gICAgICAgICQuZ2V0SlNPTiggcm9vdFVSTCArICcvcG9zdHMvJywgZnVuY3Rpb24gKCBkYXRhICkge1xuICAgICAgICAgICAganNvbkRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgY3JlYXRlRGVjaygganNvbkRhdGEgKTtcbiAgICAgICAgfSApLmZhaWwoIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCggJyNtYWluLWRlY2snICkuYXBwZW5kKCBjYXJkV2l0aEJvZHkoIGFwaUZhaWxFbGVtZW50ICkgKTtcbiAgICAgICAgfSApLmFsd2F5cyggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCAnI2xvYWRlcicgKS5wYXJlbnQoKS5oaWRlKCk7XG4gICAgICAgIH0gKTtcbiAgICB9IGVsc2UgaWYgKCBwYXRoTmFtZSA9PT0gJy9mb3JtJyApIHtcbiAgICAgICAgdmFyIGlkICAgPSBnZXRVcmxQYXJhbWV0ZXIoICdpZCcgKSxcbiAgICAgICAgICAgIHR5cGUgPSBnZXRVcmxQYXJhbWV0ZXIoICd0eXBlJyApO1xuXG4gICAgICAgICQoICcjZm9ybScgKS5oaWRlKCk7XG5cbiAgICAgICAgaWYgKCB0eXBlID09PSAndXBkYXRlJyApIHtcbiAgICAgICAgICAgICQoICcjZm9ybS1oZWFkZXInICkucHJlcGVuZCggJ1VwZGF0ZSAnICk7XG4gICAgICAgICAgICAkKCAnI2Zvcm0nICkuYXR0cignYWN0aW9uJywgJy9wb3N0cy8nICsgaWQgKyAnP19tZXRob2Q9cHV0Jyk7XG4gICAgICAgIH0gZWxzZSBpZiAoIHR5cGUgPT09ICdkZWxldGUnICkge1xuICAgICAgICAgICAgJCggJyNmb3JtLWhlYWRlcicgKS5wcmVwZW5kKCAnRGVsZXRlICcgKTtcbiAgICAgICAgICAgICQoICcjZm9ybScgKS5hdHRyKCdhY3Rpb24nLCAnL3Bvc3RzLycgKyBpZCArICc/X21ldGhvZD1kZWxldGUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoICcjZm9ybS1oZWFkZXInICkucHJlcGVuZCggJ0NyZWF0ZSAnICk7XG4gICAgICAgICAgICAkKCAnI2Zvcm0nICkuYXR0cignYWN0aW9uJywgJy9wb3N0cycpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCBpZCAhPSBudWxsICkge1xuICAgICAgICAgICAgJC5nZXRKU09OKCByb290VVJMICsgJy9wb3N0cy8nICsgaWQsIGZ1bmN0aW9uICggZWxlbWVudCApIHtcbiAgICAgICAgICAgICAgICAkKCAnI3RpdGxlJyApLnZhbCggZWxlbWVudC50aXRsZSApO1xuICAgICAgICAgICAgICAgICQoICcjYm9keScgKS52YWwoIGVsZW1lbnQuYm9keSApO1xuXG4gICAgICAgICAgICAgICAgaWYgKCB0eXBlID09PSAndXBkYXRlJyApIHtcbiAgICAgICAgICAgICAgICAgICAgJCggJyNzdWJtaXQnICkuYXR0ciggJ3ZhbHVlJywgJ0VkaXQnICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggdHlwZSA9PT0gJ2RlbGV0ZScgKSB7XG4gICAgICAgICAgICAgICAgICAgICQoICcjdGl0bGUsICNib2R5JyApLnByb3AoICdkaXNhYmxlZCcsIHRydWUgKTtcbiAgICAgICAgICAgICAgICAgICAgJCggJyNzdWJtaXQnICkucmVtb3ZlQ2xhc3MoICdidG4tc3VjY2VzcycgKS5hZGRDbGFzcyggJ2J0bi1kYW5nZXInICkuYXR0ciggJ3ZhbHVlJywgJ0RlbGV0ZScgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ICk7XG4gICAgICAgIH1cblxuICAgICAgICAkKCAnI2xvYWRlcicgKS5oaWRlKCk7XG4gICAgICAgICQoICcjZm9ybScgKS5zaG93KCk7XG4gICAgfVxuXG4gICAgJCggJyNtYWluLWRlY2snICkub24oICdjbGljaycsICcuY2xpY2thYmxlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcG9zdElkICA9ICQoIHRoaXMgKS5hdHRyKCAnZGF0YS1pZCcgKTtcblxuICAgICAgICAkKCAnLm1vZGFsJyApLmVtcHR5KCkuYXBwZW5kKCBjYXJkV2l0aEJvZHkoIGZldGNoaW5nRWxlbWVudCApICk7XG4gICAgICAgICQoICcjbW9kYWwtb3ZlcmxheScgKS5zaG93KCk7XG5cbiAgICAgICAgJC5nZXRKU09OKCByb290VVJMICsgJy9wb3N0cy8nICsgcG9zdElkLCBmdW5jdGlvbiAoIGRhdGEgKSB7XG4gICAgICAgICAgICAkKCAnLm1vZGFsJyApLmVtcHR5KCkuYXBwZW5kKCBjYXJkV2l0aEJvZHkoIGRhdGEgKSApO1xuICAgICAgICB9ICk7XG5cbiAgICAgICAgJCggJy5tb2RhbC1jbG9zZScgKS5jbGljayggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCAnI21vZGFsLW92ZXJsYXknICkuaGlkZSgpO1xuICAgICAgICB9ICk7XG4gICAgfSApO1xuICAgIFxuICAgICQoICcjc2VhcmNoLWZpZWxkJyApLmtleXVwKCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHNlYXJjaElucHV0ID0gJCggdGhpcyApLnZhbCgpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgJCggJyNjbGVhci1zZWFyY2gtZmllbGQnICkucmVtb3ZlQ2xhc3MoICdkaXNhYmxlZCcgKTtcbiAgICAgICAgJCggJyNtYWluLWRlY2snICkuZW1wdHkoKTtcblxuICAgICAgICBqc29uRGF0YS5mb3JFYWNoKCBmdW5jdGlvbiAoIGVsZW1lbnQgKSB7XG4gICAgICAgICAgICBpZiAoIGVsZW1lbnQudGl0bGUudG9Mb3dlckNhc2UoKS5pbmRleE9mKCBzZWFyY2hJbnB1dCApID49IDAgKSB7XG4gICAgICAgICAgICAgICAgJCggJyNtYWluLWRlY2snICkuYXBwZW5kKCBjYXJkTm9Cb2R5KCBlbGVtZW50ICkgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSApO1xuXG4gICAgICAgIGlmICggJCggJyNtYWluLWRlY2snICkuaXMoICc6ZW1wdHknICkgKSB7XG4gICAgICAgICAgICAkKCAnI21haW4tZGVjaycgKS5hcHBlbmQoIGNhcmRXaXRoQm9keSggbm9SZXN1bHRzRWxlbWVudCApICk7XG4gICAgICAgIH1cblxuICAgICAgICAkKCAnI2NsZWFyLXNlYXJjaC1maWVsZCcgKS5jbGljayggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCB0aGlzICkuYWRkQ2xhc3MoICdkaXNhYmxlZCcgKTtcbiAgICAgICAgICAgICQoICcjc2VhcmNoLWZpZWxkJyApLnZhbCggJycgKTtcbiAgICAgICAgICAgICQoICcjbWFpbi1kZWNrJyApLmVtcHR5KCk7XG4gICAgICAgICAgICBjcmVhdGVEZWNrKCBqc29uRGF0YSApO1xuICAgICAgICB9ICk7XG5cbiAgICAgICAgaWYgKCBzZWFyY2hJbnB1dCA9PSAnJyApIHtcbiAgICAgICAgICAgICQoICcjY2xlYXItc2VhcmNoLWZpZWxkJyApLmFkZENsYXNzKCAnZGlzYWJsZWQnICk7XG4gICAgICAgIH1cbiAgICB9ICk7XG59ICk7Il19
