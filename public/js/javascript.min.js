function getUrlParameter(e){var t,a,d=decodeURIComponent(window.location.search.substring(1)).split("&");for(a=0;a<d.length;a++)if((t=d[a].split("="))[0]===e)return void 0===t[1]||t[1]}function createDeck(e){e.forEach(function(e){$("#main-deck").append(cardNoBody(e))})}function cardNoBody(e){var t='<div class="card fadeInUp pointer" data-id="'+e._id+'">';return t+='<div class="card-header">',t+='<i class="fa fa-angle-right fa-3x" aria-hidden="true"></i>',t+="<h3>"+e.title+"</h3>",t+='<p class="secondary">'+dateFromObjectId(e._id)+"</p>",t+="</div>",t+="</div>"}function cardWithBody(e){var t='<div class="card">';return t+='<div class="card-header">',t+="<h3>"+e.title+"</h3>",null!=e._id&&(t+='<p class="secondary">'+dateFromObjectId(e._id)+"</p>"),t+="</div>",t+='<div class="card-body">',t+="<p>"+e.body+"</p>",t+="</div>",null!=e._id&&(t+='<div class="card-footer">',t+='<a href="/form?id='+e._id+'&type=update" class="btn btn-success">Edit</a>',t+='<a href="/form?id='+e._id+'&type=delete" class="btn btn-danger">Delete</a>',t+="</div>"),t+="</div>"}function dateFromObjectId(e){var t=new Date(1e3*parseInt(e.substring(0,8),16)),a=["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]+" ";return a+=t.getDate()+" ",a+=t.getFullYear()+", ",a+=addLeadingZero(t.getHours())+":",a+=addLeadingZero(t.getMinutes())+":",a+=addLeadingZero(t.getSeconds())}function addLeadingZero(e){return 1==e.toString().length&&(e="0"+e),e}$(function(){"use strict";var e=window.location.protocol+"//"+window.location.host,t=top.location.pathname,a="",d={title:"Sorry, we did not find anything..",body:"Contact somebody if this keeps on happening.."},r={title:"Fetching Data",body:'<img src="imgs/loader.gif" alt="Loading..." id="loader">'},i={title:"No results.",body:"Sorry, but we couldn't find anything matching the search string.<br>Press the X or type something else."};if("/"===t)$.getJSON(e+"/posts/",function(e){createDeck(a=e)}).fail(function(){$("#main-deck").append(cardWithBody(d))}).always(function(){$("#loader").parent().hide()});else if("/form"===t){var o=getUrlParameter("id"),n=getUrlParameter("type");$("#form").hide(),"update"===n?($("#form-header").prepend("Update "),$("#form").attr("action","/posts/"+o+"?_method=put")):"delete"===n?($("#form-header").prepend("Delete "),$("#form").attr("action","/posts/"+o+"?_method=delete")):($("#form-header").prepend("Create "),$("#form").attr("action","/posts")),null!=o&&$.getJSON(e+"/posts/"+o,function(e){$("#title").val(e.title),$("#body").val(e.body),"update"===n?$("#submit").attr("value","Edit"):"delete"===n&&($("#title, #body").prop("disabled",!0),$("#submit").removeClass("btn-success").addClass("btn-danger").attr("value","Delete"))}),$("#loader").hide(),$("#form").show()}$("#main-deck").on("click",".card",function(){var t=$(this).attr("data-id");$(".modal").empty().append(cardWithBody(r)),$("#modal-overlay").show(),$.getJSON(e+"/posts/"+t,function(e){$(".modal").empty().append(cardWithBody(e))}),$(".modal-close").click(function(){$("#modal-overlay").hide()})}),$("#search-field").keyup(function(){var e=$(this).val().toLowerCase();$("#clear-search-field").removeClass("disabled"),$("#main-deck").empty(),$("#clear-search-field").click(function(){$(this).addClass("disabled"),$("#search-field").val(""),$("#main-deck").empty(),createDeck(a)}),""==e&&$("#clear-search-field").addClass("disabled"),a.forEach(function(t){(t.title.toLowerCase().indexOf(e)>=0||t.body.toLowerCase().indexOf(e)>=0)&&$("#main-deck").append(cardNoBody(t))}),$("#main-deck").is(":empty")&&$("#main-deck").append(cardWithBody(i))})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImphdmFzY3JpcHQuanMiXSwibmFtZXMiOlsiZ2V0VXJsUGFyYW1ldGVyIiwic1BhcmFtIiwic1BhcmFtZXRlck5hbWUiLCJpIiwic1VSTFZhcmlhYmxlcyIsImRlY29kZVVSSUNvbXBvbmVudCIsIndpbmRvdyIsImxvY2F0aW9uIiwic2VhcmNoIiwic3Vic3RyaW5nIiwic3BsaXQiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJjcmVhdGVEZWNrIiwiZGF0YSIsImZvckVhY2giLCJlbGVtZW50IiwiJCIsImFwcGVuZCIsImNhcmROb0JvZHkiLCJodG1sIiwiX2lkIiwidGl0bGUiLCJkYXRlRnJvbU9iamVjdElkIiwiY2FyZFdpdGhCb2R5IiwiYm9keSIsIm9iamVjdElkIiwiZGF0ZU9iamVjdCIsIkRhdGUiLCJwYXJzZUludCIsInN0ciIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsImdldEZ1bGxZZWFyIiwiYWRkTGVhZGluZ1plcm8iLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJnZXRTZWNvbmRzIiwibnVtYmVyIiwidG9TdHJpbmciLCJyb290VVJMIiwicHJvdG9jb2wiLCJob3N0IiwicGF0aE5hbWUiLCJ0b3AiLCJwYXRobmFtZSIsImpzb25EYXRhIiwiYXBpRmFpbEVsZW1lbnQiLCJmZXRjaGluZ0VsZW1lbnQiLCJub1Jlc3VsdHNFbGVtZW50IiwiZ2V0SlNPTiIsImZhaWwiLCJhbHdheXMiLCJwYXJlbnQiLCJoaWRlIiwiaWQiLCJ0eXBlIiwicHJlcGVuZCIsImF0dHIiLCJ2YWwiLCJwcm9wIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsInNob3ciLCJvbiIsInBvc3RJZCIsInRoaXMiLCJlbXB0eSIsImNsaWNrIiwia2V5dXAiLCJzZWFyY2hJbnB1dCIsInRvTG93ZXJDYXNlIiwiaW5kZXhPZiIsImlzIl0sIm1hcHBpbmdzIjoiQUFDQSxTQUFTQSxnQkFBZ0JDLEdBQ3JCLElBRUlDLEVBQ0FDLEVBRkFDLEVBRFdDLG1CQUFtQkMsT0FBT0MsU0FBU0MsT0FB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LElBQWtCLElBQ3REckQsRUFBRyxjQUFlQyxPQUFRQyxXQUFZSCxNQUl6Q0MsRUFBRyxjQUFld0QsR0FBSSxXQUN2QnhELEVBQUcsY0FBZUMsT0FBUU0sYUFBY3lCIiwiZmlsZSI6ImphdmFzY3JpcHQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTk0OTEzMzYvZ2V0LXVybC1wYXJhbWV0ZXItanF1ZXJ5LW9yLWhvdy10by1nZXQtcXVlcnktc3RyaW5nLXZhbHVlcy1pbi1qc1xuZnVuY3Rpb24gZ2V0VXJsUGFyYW1ldGVyKHNQYXJhbSkge1xuICAgIHZhciBzUGFnZVVSTCA9IGRlY29kZVVSSUNvbXBvbmVudCh3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cmluZygxKSksXG4gICAgICAgIHNVUkxWYXJpYWJsZXMgPSBzUGFnZVVSTC5zcGxpdCgnJicpLFxuICAgICAgICBzUGFyYW1ldGVyTmFtZSxcbiAgICAgICAgaTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBzVVJMVmFyaWFibGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHNQYXJhbWV0ZXJOYW1lID0gc1VSTFZhcmlhYmxlc1tpXS5zcGxpdCgnPScpO1xuXG4gICAgICAgIGlmIChzUGFyYW1ldGVyTmFtZVswXSA9PT0gc1BhcmFtKSB7XG4gICAgICAgICAgICByZXR1cm4gc1BhcmFtZXRlck5hbWVbMV0gPT09IHVuZGVmaW5lZCA/IHRydWUgOiBzUGFyYW1ldGVyTmFtZVsxXTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZURlY2soIGRhdGEgKSB7XG4gICAgZGF0YS5mb3JFYWNoKCBmdW5jdGlvbiAoIGVsZW1lbnQgKSB7XG4gICAgICAgICQoICcjbWFpbi1kZWNrJyApLmFwcGVuZCggY2FyZE5vQm9keSggZWxlbWVudCApICk7XG4gICAgfSApO1xufTtcblxuZnVuY3Rpb24gY2FyZE5vQm9keSggZWxlbWVudCkge1xuICAgIHZhciBodG1sID0gJzxkaXYgY2xhc3M9XCJjYXJkIGZhZGVJblVwIHBvaW50ZXJcIiBkYXRhLWlkPVwiJyArIGVsZW1lbnQuX2lkICsgJ1wiPic7XG4gICAgICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwiY2FyZC1oZWFkZXJcIj4nO1xuICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxpIGNsYXNzPVwiZmEgZmEtYW5nbGUtcmlnaHQgZmEtM3hcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JztcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8aDM+JyArIGVsZW1lbnQudGl0bGUgKyAnPC9oMz4nO1xuICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxwIGNsYXNzPVwic2Vjb25kYXJ5XCI+JyArIGRhdGVGcm9tT2JqZWN0SWQoIGVsZW1lbnQuX2lkICkgKyAnPC9wPic7XG4gICAgICAgICAgICBodG1sICs9ICc8L2Rpdj4nO1xuICAgICAgICBodG1sICs9ICc8L2Rpdj4nO1xuICAgIHJldHVybiBodG1sO1xufTtcblxuZnVuY3Rpb24gY2FyZFdpdGhCb2R5KCBlbGVtZW50ICkge1xuICAgIHZhciBodG1sID0gJzxkaXYgY2xhc3M9XCJjYXJkXCI+JztcbiAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cImNhcmQtaGVhZGVyXCI+JztcbiAgICAgICAgICAgIGh0bWwgKz0gJzxoMz4nICsgZWxlbWVudC50aXRsZSArICc8L2gzPic7XG4gICAgICAgICAgICBpZiggZWxlbWVudC5faWQgIT0gbnVsbCApIHtcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8cCBjbGFzcz1cInNlY29uZGFyeVwiPicgKyBkYXRlRnJvbU9iamVjdElkKCBlbGVtZW50Ll9pZCApICsgJzwvcD4nO1xuICAgICAgICAgICAgfVxuICAgICAgICBodG1sICs9ICc8L2Rpdj4nO1xuXG4gICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJjYXJkLWJvZHlcIj4nO1xuICAgICAgICAgICAgaHRtbCArPSAnPHA+JyArIGVsZW1lbnQuYm9keSArICc8L3A+JztcbiAgICAgICAgaHRtbCArPSAnPC9kaXY+JztcblxuICAgICAgICBpZiggZWxlbWVudC5faWQgIT0gbnVsbCApIHtcbiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJjYXJkLWZvb3RlclwiPic7XG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPGEgaHJlZj1cIi9mb3JtP2lkPScgKyBlbGVtZW50Ll9pZCArICcmdHlwZT11cGRhdGVcIiBjbGFzcz1cImJ0biBidG4tc3VjY2Vzc1wiPkVkaXQ8L2E+JztcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8YSBocmVmPVwiL2Zvcm0/aWQ9JyArIGVsZW1lbnQuX2lkICsgJyZ0eXBlPWRlbGV0ZVwiIGNsYXNzPVwiYnRuIGJ0bi1kYW5nZXJcIj5EZWxldGU8L2E+JztcbiAgICAgICAgICAgIGh0bWwgKz0gJzwvZGl2Pic7XG4gICAgICAgIH1cbiAgICBodG1sICs9ICc8L2Rpdj4nO1xuXG4gICAgcmV0dXJuIGh0bWw7XG59O1xuXG5mdW5jdGlvbiBkYXRlRnJvbU9iamVjdElkKCBvYmplY3RJZCApIHtcbiAgICB2YXIgZGF0ZU9iamVjdCA9IG5ldyBEYXRlKCBwYXJzZUludCggb2JqZWN0SWQuc3Vic3RyaW5nKCAwLCA4ICksIDE2ICkgKiAxMDAwICk7XG4gICAgdmFyIG1vbnRoID0gWyAnSmFudWFyeScsICdGZWJydWFyeScsICdNYXJjaCcsICdBcHJpbCcsICdNYXknLCAnSnVuZScsIFxuICAgICAgICAgICAgICAgICAgJ0p1bHknLCAnQXVndXN0JywgJ1NlcHRlbWJlcicsICdPY3RvYmVyJywgJ05vdmVtYmVyJywgJ0RlY2VtYmVyJyBdO1xuXG4gICAgdmFyIHN0ciA9IG1vbnRoWyBkYXRlT2JqZWN0LmdldE1vbnRoKCkgXSArICcgJztcbiAgICAgICAgc3RyICs9IGRhdGVPYmplY3QuZ2V0RGF0ZSgpICsgJyAnO1xuICAgICAgICBzdHIgKz0gZGF0ZU9iamVjdC5nZXRGdWxsWWVhcigpICsgJywgJztcbiAgICAgICAgc3RyICs9IGFkZExlYWRpbmdaZXJvKCBkYXRlT2JqZWN0LmdldEhvdXJzKCkgKSArICc6JztcbiAgICAgICAgc3RyICs9IGFkZExlYWRpbmdaZXJvKCBkYXRlT2JqZWN0LmdldE1pbnV0ZXMoKSApICsgJzonO1xuICAgICAgICBzdHIgKz0gYWRkTGVhZGluZ1plcm8oIGRhdGVPYmplY3QuZ2V0U2Vjb25kcygpICk7XG5cbiAgICByZXR1cm4gc3RyO1xufTtcblxuZnVuY3Rpb24gYWRkTGVhZGluZ1plcm8oIG51bWJlciApIHtcbiAgICBpZiggbnVtYmVyLnRvU3RyaW5nKCkubGVuZ3RoID09IDEgKSB7XG4gICAgICAgIG51bWJlciA9ICcwJyArIG51bWJlcjtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVtYmVyO1xufTtcbiQoIGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciByb290VVJMICAgICAgICAgID0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0LFxuICAgICAgICBwYXRoTmFtZSAgICAgICAgID0gdG9wLmxvY2F0aW9uLnBhdGhuYW1lLFxuICAgICAgICBqc29uRGF0YSAgICAgICAgID0gJycsXG4gICAgICAgIGFwaUZhaWxFbGVtZW50ICAgPSB7ICd0aXRsZSc6ICdTb3JyeSwgd2UgZGlkIG5vdCBmaW5kIGFueXRoaW5nLi4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYm9keSc6ICAnQ29udGFjdCBzb21lYm9keSBpZiB0aGlzIGtlZXBzIG9uIGhhcHBlbmluZy4uJyB9LFxuICAgICAgICBmZXRjaGluZ0VsZW1lbnQgID0geyAndGl0bGUnOiAnRmV0Y2hpbmcgRGF0YScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICdib2R5JzogICc8aW1nIHNyYz1cImltZ3MvbG9hZGVyLmdpZlwiIGFsdD1cIkxvYWRpbmcuLi5cIiBpZD1cImxvYWRlclwiPicgfSxcbiAgICAgICAgbm9SZXN1bHRzRWxlbWVudCA9IHsgJ3RpdGxlJzogJ05vIHJlc3VsdHMuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2JvZHknOiAgJ1NvcnJ5LCBidXQgd2UgY291bGRuXFwndCBmaW5kIGFueXRoaW5nIG1hdGNoaW5nIHRoZSBzZWFyY2ggc3RyaW5nLjxicj5QcmVzcyB0aGUgWCBvciB0eXBlIHNvbWV0aGluZyBlbHNlLicgfTtcblxuICAgIGlmICggcGF0aE5hbWUgPT09ICcvJyApIHtcbiAgICAgICAgJC5nZXRKU09OKCByb290VVJMICsgJy9wb3N0cy8nLCBmdW5jdGlvbiAoIGRhdGEgKSB7XG4gICAgICAgICAgICBqc29uRGF0YSA9IGRhdGE7XG4gICAgICAgICAgICBjcmVhdGVEZWNrKCBqc29uRGF0YSApO1xuICAgICAgICB9ICkuZmFpbCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCAnI21haW4tZGVjaycgKS5hcHBlbmQoIGNhcmRXaXRoQm9keSggYXBpRmFpbEVsZW1lbnQgKSApO1xuICAgICAgICB9ICkuYWx3YXlzKCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoICcjbG9hZGVyJyApLnBhcmVudCgpLmhpZGUoKTtcbiAgICAgICAgfSApO1xuICAgIH0gZWxzZSBpZiAoIHBhdGhOYW1lID09PSAnL2Zvcm0nICkge1xuICAgICAgICB2YXIgaWQgICA9IGdldFVybFBhcmFtZXRlciggJ2lkJyApLFxuICAgICAgICAgICAgdHlwZSA9IGdldFVybFBhcmFtZXRlciggJ3R5cGUnICk7XG5cbiAgICAgICAgJCggJyNmb3JtJyApLmhpZGUoKTtcblxuICAgICAgICBpZiAoIHR5cGUgPT09ICd1cGRhdGUnICkge1xuICAgICAgICAgICAgJCggJyNmb3JtLWhlYWRlcicgKS5wcmVwZW5kKCAnVXBkYXRlICcgKTtcbiAgICAgICAgICAgICQoICcjZm9ybScgKS5hdHRyKCdhY3Rpb24nLCAnL3Bvc3RzLycgKyBpZCArICc/X21ldGhvZD1wdXQnKTtcbiAgICAgICAgfSBlbHNlIGlmICggdHlwZSA9PT0gJ2RlbGV0ZScgKSB7XG4gICAgICAgICAgICAkKCAnI2Zvcm0taGVhZGVyJyApLnByZXBlbmQoICdEZWxldGUgJyApO1xuICAgICAgICAgICAgJCggJyNmb3JtJyApLmF0dHIoJ2FjdGlvbicsICcvcG9zdHMvJyArIGlkICsgJz9fbWV0aG9kPWRlbGV0ZScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJCggJyNmb3JtLWhlYWRlcicgKS5wcmVwZW5kKCAnQ3JlYXRlICcgKTtcbiAgICAgICAgICAgICQoICcjZm9ybScgKS5hdHRyKCdhY3Rpb24nLCAnL3Bvc3RzJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIGlkICE9IG51bGwgKSB7XG4gICAgICAgICAgICAkLmdldEpTT04oIHJvb3RVUkwgKyAnL3Bvc3RzLycgKyBpZCwgZnVuY3Rpb24gKCBlbGVtZW50ICkge1xuICAgICAgICAgICAgICAgICQoICcjdGl0bGUnICkudmFsKCBlbGVtZW50LnRpdGxlICk7XG4gICAgICAgICAgICAgICAgJCggJyNib2R5JyApLnZhbCggZWxlbWVudC5ib2R5ICk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIHR5cGUgPT09ICd1cGRhdGUnICkge1xuICAgICAgICAgICAgICAgICAgICAkKCAnI3N1Ym1pdCcgKS5hdHRyKCAndmFsdWUnLCAnRWRpdCcgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCB0eXBlID09PSAnZGVsZXRlJyApIHtcbiAgICAgICAgICAgICAgICAgICAgJCggJyN0aXRsZSwgI2JvZHknICkucHJvcCggJ2Rpc2FibGVkJywgdHJ1ZSApO1xuICAgICAgICAgICAgICAgICAgICAkKCAnI3N1Ym1pdCcgKS5yZW1vdmVDbGFzcyggJ2J0bi1zdWNjZXNzJyApLmFkZENsYXNzKCAnYnRuLWRhbmdlcicgKS5hdHRyKCAndmFsdWUnLCAnRGVsZXRlJyApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gKTtcbiAgICAgICAgfVxuXG4gICAgICAgICQoICcjbG9hZGVyJyApLmhpZGUoKTtcbiAgICAgICAgJCggJyNmb3JtJyApLnNob3coKTtcbiAgICB9XG5cbiAgICAkKCAnI21haW4tZGVjaycgKS5vbiggJ2NsaWNrJywgJy5jYXJkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcG9zdElkICA9ICQoIHRoaXMgKS5hdHRyKCAnZGF0YS1pZCcgKTtcblxuICAgICAgICAkKCAnLm1vZGFsJyApLmVtcHR5KCkuYXBwZW5kKCBjYXJkV2l0aEJvZHkoIGZldGNoaW5nRWxlbWVudCApICk7XG4gICAgICAgICQoICcjbW9kYWwtb3ZlcmxheScgKS5zaG93KCk7XG5cbiAgICAgICAgJC5nZXRKU09OKCByb290VVJMICsgJy9wb3N0cy8nICsgcG9zdElkLCBmdW5jdGlvbiAoIGRhdGEgKSB7XG4gICAgICAgICAgICAkKCAnLm1vZGFsJyApLmVtcHR5KCkuYXBwZW5kKCBjYXJkV2l0aEJvZHkoIGRhdGEgKSApO1xuICAgICAgICB9ICk7XG5cbiAgICAgICAgJCggJy5tb2RhbC1jbG9zZScgKS5jbGljayggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCAnI21vZGFsLW92ZXJsYXknICkuaGlkZSgpO1xuICAgICAgICB9ICk7XG4gICAgfSApO1xuICAgIFxuICAgICQoICcjc2VhcmNoLWZpZWxkJyApLmtleXVwKCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHNlYXJjaElucHV0ID0gJCggdGhpcyApLnZhbCgpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgJCggJyNjbGVhci1zZWFyY2gtZmllbGQnICkucmVtb3ZlQ2xhc3MoICdkaXNhYmxlZCcgKTtcbiAgICAgICAgJCggJyNtYWluLWRlY2snICkuZW1wdHkoKTtcblxuICAgICAgICAkKCAnI2NsZWFyLXNlYXJjaC1maWVsZCcgKS5jbGljayggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCB0aGlzICkuYWRkQ2xhc3MoICdkaXNhYmxlZCcgKTtcbiAgICAgICAgICAgICQoICcjc2VhcmNoLWZpZWxkJyApLnZhbCggJycgKTtcbiAgICAgICAgICAgICQoICcjbWFpbi1kZWNrJyApLmVtcHR5KCk7XG4gICAgICAgICAgICBjcmVhdGVEZWNrKCBqc29uRGF0YSApO1xuICAgICAgICB9ICk7XG5cbiAgICAgICAgaWYgKCBzZWFyY2hJbnB1dCA9PSAnJyApIHtcbiAgICAgICAgICAgICQoICcjY2xlYXItc2VhcmNoLWZpZWxkJyApLmFkZENsYXNzKCAnZGlzYWJsZWQnICk7XG4gICAgICAgIH1cblxuICAgICAgICBqc29uRGF0YS5mb3JFYWNoKCBmdW5jdGlvbiAoIGVsZW1lbnQgKSB7XG4gICAgICAgICAgICBpZiggZWxlbWVudC50aXRsZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoIHNlYXJjaElucHV0ICkgPj0gMCB8fFxuICAgICAgICAgICAgICAgIGVsZW1lbnQuYm9keS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoIHNlYXJjaElucHV0ICkgID49IDAgKSB7XG4gICAgICAgICAgICAgICAgJCggJyNtYWluLWRlY2snICkuYXBwZW5kKCBjYXJkTm9Cb2R5KCBlbGVtZW50ICkgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSApO1xuXG4gICAgICAgIGlmICggJCggJyNtYWluLWRlY2snICkuaXMoICc6ZW1wdHknICkgKSB7XG4gICAgICAgICAgICAkKCAnI21haW4tZGVjaycgKS5hcHBlbmQoIGNhcmRXaXRoQm9keSggbm9SZXN1bHRzRWxlbWVudCApICk7XG4gICAgICAgIH1cbiAgICB9ICk7XG59ICk7Il19
