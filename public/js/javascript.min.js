function getUrlParameter(e){var a,t,d=decodeURIComponent(window.location.search.substring(1)).split("&");for(t=0;t<d.length;t++)if((a=d[t].split("="))[0]===e)return void 0===a[1]||a[1]}function initMap(){var e={lat:55.70394599999999,lng:12.53749300000004},a=new google.maps.Map(document.getElementById("map"),{zoom:10,center:e});new google.maps.Marker({position:e,map:a})}function createDeck(e){e.forEach(function(e){$("#main-deck").append(cardNoBody(e))})}function cardNoBody(e){var a='<div class="card fadeInUp pointer clickable" data-id="'+e._id+'">';return a+='<div class="card-header">',a+='<i class="fa fa-angle-right fa-3x" aria-hidden="true"></i>',a+="<h3>"+e.title+"</h3>",a+='<p class="secondary">'+dateFromObjectId(e._id)+"</p>",a+="</div>",a+="</div>"}function cardWithBody(e){var a='<div class="card">';return a+='<div class="card-header">',a+="<h3>"+e.title+"</h3>",null!=e._id&&(a+='<p class="secondary">'+dateFromObjectId(e._id)+"</p>"),a+="</div>",a+='<div class="card-body">',a+="<p>"+e.body+"</p>",a+="</div>",null!=e._id&&(a+='<div class="card-footer">',a+='<a href="/form?id='+e._id+'&type=update" class="btn btn-success">Edit</a>',a+='<a href="/form?id='+e._id+'&type=delete" class="btn btn-danger">Delete</a>',a+="</div>"),a+="</div>"}function dateFromObjectId(e){var a=new Date(1e3*parseInt(e.substring(0,8),16)),t=["January","February","March","April","May","June","July","August","September","October","November","December"][a.getMonth()]+" ";return t+=a.getDate()+" ",t+=a.getFullYear()+", ",t+=addLeadingZero(a.getHours())+":",t+=addLeadingZero(a.getMinutes())+":",t+=addLeadingZero(a.getSeconds())}function addLeadingZero(e){return 1==e.toString().length&&(e="0"+e),e}$(function(){"use strict";var e=window.location.protocol+"//"+window.location.host,a=top.location.pathname,t="",d={title:"Sorry, we did not find anything..",body:"Contact somebody if this keeps on happening.."},i={title:"Fetching Data",body:'<img src="imgs/loader.gif" alt="Loading..." id="loader">'},r={title:"No results.",body:'Sorry, but we couldn\'t find anything matching the search string.<br>Press the <i class="fa fa-times" aria-hidden="true"></i> or type something else.'};if("/"===a)$.getJSON(e+"/posts/",function(e){createDeck(t=e)}).fail(function(){$("#main-deck").append(cardWithBody(d))}).always(function(){$("#loader").parent().hide()});else if("/form"===a){var o=getUrlParameter("id"),n=getUrlParameter("type");$("#form").hide(),"update"===n?($("#form-header").prepend("Update "),$("#form").attr("action","/posts/"+o+"?_method=put")):"delete"===n?($("#form-header").prepend("Delete "),$("#form").attr("action","/posts/"+o+"?_method=delete")):($("#form-header").prepend("Create "),$("#form").attr("action","/posts")),null!=o&&$.getJSON(e+"/posts/"+o,function(e){$("#title").val(e.title),$("#body").val(e.body),"update"===n?$("#submit").attr("value","Edit"):"delete"===n&&($("#title, #body").prop("disabled",!0),$("#submit").removeClass("btn-success").addClass("btn-danger").attr("value","Delete"))}),$("#loader").hide(),$("#form").show()}$("#main-deck").on("click",".clickable",function(){var a=$(this).attr("data-id");$(".modal").empty().append(cardWithBody(i)),$("#modal-overlay").show(),$.getJSON(e+"/posts/"+a,function(e){$(".modal").empty().append(cardWithBody(e))}),$(".modal-close").click(function(){$("#modal-overlay").hide()})}),$("#search-field").keyup(function(){var e=$(this).val().toLowerCase();$("#clear-search-field").removeClass("disabled"),$("#main-deck").empty(),t.forEach(function(a){a.title.toLowerCase().indexOf(e)>=0&&$("#main-deck").append(cardNoBody(a))}),$("#main-deck").is(":empty")&&$("#main-deck").append(cardWithBody(r)),$("#clear-search-field").click(function(){$(this).addClass("disabled"),$("#search-field").val(""),$("#main-deck").empty(),createDeck(t)}),""==e&&$("#clear-search-field").addClass("disabled")})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImphdmFzY3JpcHQuanMiXSwibmFtZXMiOlsiZ2V0VXJsUGFyYW1ldGVyIiwic1BhcmFtIiwic1BhcmFtZXRlck5hbWUiLCJpIiwic1VSTFZhcmlhYmxlcyIsImRlY29kZVVSSUNvbXBvbmVudCIsIndpbmRvdyIsImxvY2F0aW9uIiwic2VhcmNoIiwic3Vic3RyaW5nIiwic3BsaXQiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJpbml0TWFwIiwia2VhIiwibGF0IiwibG5nIiwibWFwIiwiZ29vZ2xlIiwibWFwcyIsIk1hcCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ6b29tIiwiY2VudGVyIiwiTWFya2VyIiwicG9zaXRpb24iLCJjcmVhdGVEZWNrIiwiZGF0YSIsImZvckVhY2giLCJlbGVtZW50IiwiJCIsImFwcGVuZCIsImNhcmROb0JvZHkiLCJodG1sIiwiX2lkIiwidGl0bGUiLCJkYXRlRnJvbU9iamVjdElkIiwiY2FyZFdpdGhCb2R5IiwiYm9keSIsIm9iamVjdElkIiwiZGF0ZU9iamVjdCIsIkRhdGUiLCJwYXJzZUludCIsInN0ciIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsImdldEZ1bGxZZWFyIiwiYWRkTGVhZGluZ1plcm8iLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJnZXRTZWNvbmRzIiwibnVtYmVyIiwidG9TdHJpbmciLCJyb290VVJMIiwicHJvdG9jb2wiLCJob3N0IiwicGF0aE5hbWUiLCJ0b3AiLCJwYXRobmFtZSIsImpzb25EYXRhIiwiYXBpRmFpbEVsZW1lbnQiLCJmZXRjaGluZ0VsZW1lbnQiLCJub1Jlc3VsdHNFbGVtZW50IiwiZ2V0SlNPTiIsImZhaWwiLCJhbHdheXMiLCJwYXJlbnQiLCJoaWRlIiwiaWQiLCJ0eXBlIiwicHJlcGVuZCIsImF0dHIiLCJ2YWwiLCJwcm9wIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsInNob3ciLCJvbiIsInBvc3RJZCIsInRoaXMiLCJlbXB0eSIsImNsaWNrIiwia2V5dXAiLCJzZWFyY2hJ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QUcsdUJBQXdCNEMsWUFBYSxZQUN4QzVDLEVBQUcsY0FBZWtELFFBRWxCckIsRUFBUy9CLFFBQVMsU0FBV0MsR0FDcEJBLEVBQVFNLE1BQU1pRCxjQUFjQyxRQUFTRixJQUFpQixHQUN2RHJELEVBQUcsY0FBZUMsT0FBUUMsV0FBWUgsTUFJekNDLEVBQUcsY0FBZXdELEdBQUksV0FDdkJ4RCxFQUFHLGNBQWVDLE9BQVFNLGFBQWN5QixJQUc1Q2hDLEVBQUcsdUJBQXdCbUQsTUFBTyxXQUM5Qm5ELEVBQUdpRCxNQUFPSixTQUFVLFlBQ3BCN0MsRUFBRyxpQkFBa0IwQyxJQUFLLElBQzFCMUMsRUFBRyxjQUFla0QsUUFDbEJ0RCxXQUFZaUMsS0FHSSxJQUFmd0IsR0FDRHJELEVBQUcsdUJBQXdCNkMsU0FBVSIsImZpbGUiOiJqYXZhc2NyaXB0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE5NDkxMzM2L2dldC11cmwtcGFyYW1ldGVyLWpxdWVyeS1vci1ob3ctdG8tZ2V0LXF1ZXJ5LXN0cmluZy12YWx1ZXMtaW4tanNcbmZ1bmN0aW9uIGdldFVybFBhcmFtZXRlcihzUGFyYW0pIHtcbiAgICB2YXIgc1BhZ2VVUkwgPSBkZWNvZGVVUklDb21wb25lbnQod2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHJpbmcoMSkpLFxuICAgICAgICBzVVJMVmFyaWFibGVzID0gc1BhZ2VVUkwuc3BsaXQoJyYnKSxcbiAgICAgICAgc1BhcmFtZXRlck5hbWUsXG4gICAgICAgIGk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgc1VSTFZhcmlhYmxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBzUGFyYW1ldGVyTmFtZSA9IHNVUkxWYXJpYWJsZXNbaV0uc3BsaXQoJz0nKTtcblxuICAgICAgICBpZiAoc1BhcmFtZXRlck5hbWVbMF0gPT09IHNQYXJhbSkge1xuICAgICAgICAgICAgcmV0dXJuIHNQYXJhbWV0ZXJOYW1lWzFdID09PSB1bmRlZmluZWQgPyB0cnVlIDogc1BhcmFtZXRlck5hbWVbMV07XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGluaXRNYXAoKSB7XG4gICAgdmFyIGtlYSAgICA9IHtcbiAgICAgICAgbGF0OiA1NS43MDM5NDU5OTk5OTk5OSxcbiAgICAgICAgbG5nOiAxMi41Mzc0OTMwMDAwMDAwNCB9O1xuICAgIHZhciBtYXAgICAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ21hcCcgKSwge1xuICAgICAgICB6b29tOiAgIDEwLFxuICAgICAgICBjZW50ZXI6IGtlYSB9ICk7XG4gICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoIHtcbiAgICAgICAgcG9zaXRpb246IGtlYSxcbiAgICAgICAgbWFwOiAgICAgIG1hcCB9ICk7XG59XG5mdW5jdGlvbiBjcmVhdGVEZWNrKCBkYXRhICkge1xuICAgIGRhdGEuZm9yRWFjaCggZnVuY3Rpb24gKCBlbGVtZW50ICkge1xuICAgICAgICAkKCAnI21haW4tZGVjaycgKS5hcHBlbmQoIGNhcmROb0JvZHkoIGVsZW1lbnQgKSApO1xuICAgIH0gKTtcbn07XG5cbmZ1bmN0aW9uIGNhcmROb0JvZHkoIGVsZW1lbnQgKSB7XG4gICAgdmFyIGh0bWwgPSAnPGRpdiBjbGFzcz1cImNhcmQgZmFkZUluVXAgcG9pbnRlciBjbGlja2FibGVcIiBkYXRhLWlkPVwiJyArIGVsZW1lbnQuX2lkICsgJ1wiPic7XG4gICAgICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwiY2FyZC1oZWFkZXJcIj4nO1xuICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxpIGNsYXNzPVwiZmEgZmEtYW5nbGUtcmlnaHQgZmEtM3hcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JztcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8aDM+JyArIGVsZW1lbnQudGl0bGUgKyAnPC9oMz4nO1xuICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxwIGNsYXNzPVwic2Vjb25kYXJ5XCI+JyArIGRhdGVGcm9tT2JqZWN0SWQoIGVsZW1lbnQuX2lkICkgKyAnPC9wPic7XG4gICAgICAgICAgICBodG1sICs9ICc8L2Rpdj4nO1xuICAgICAgICBodG1sICs9ICc8L2Rpdj4nO1xuICAgIHJldHVybiBodG1sO1xufTtcblxuZnVuY3Rpb24gY2FyZFdpdGhCb2R5KCBlbGVtZW50ICkge1xuICAgIHZhciBodG1sID0gJzxkaXYgY2xhc3M9XCJjYXJkXCI+JztcbiAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cImNhcmQtaGVhZGVyXCI+JztcbiAgICAgICAgICAgIGh0bWwgKz0gJzxoMz4nICsgZWxlbWVudC50aXRsZSArICc8L2gzPic7XG4gICAgICAgICAgICBpZiAoIGVsZW1lbnQuX2lkICE9IG51bGwgKSB7XG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPHAgY2xhc3M9XCJzZWNvbmRhcnlcIj4nICsgZGF0ZUZyb21PYmplY3RJZCggZWxlbWVudC5faWQgKSArICc8L3A+JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgaHRtbCArPSAnPC9kaXY+JztcblxuICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwiY2FyZC1ib2R5XCI+JztcbiAgICAgICAgICAgIGh0bWwgKz0gJzxwPicgKyBlbGVtZW50LmJvZHkgKyAnPC9wPic7XG4gICAgICAgIGh0bWwgKz0gJzwvZGl2Pic7XG5cbiAgICAgICAgaWYgKCBlbGVtZW50Ll9pZCAhPSBudWxsICkge1xuICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cImNhcmQtZm9vdGVyXCI+JztcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8YSBocmVmPVwiL2Zvcm0/aWQ9JyArIGVsZW1lbnQuX2lkICsgJyZ0eXBlPXVwZGF0ZVwiIGNsYXNzPVwiYnRuIGJ0bi1zdWNjZXNzXCI+RWRpdDwvYT4nO1xuICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxhIGhyZWY9XCIvZm9ybT9pZD0nICsgZWxlbWVudC5faWQgKyAnJnR5cGU9ZGVsZXRlXCIgY2xhc3M9XCJidG4gYnRuLWRhbmdlclwiPkRlbGV0ZTwvYT4nO1xuICAgICAgICAgICAgaHRtbCArPSAnPC9kaXY+JztcbiAgICAgICAgfVxuICAgIGh0bWwgKz0gJzwvZGl2Pic7XG5cbiAgICByZXR1cm4gaHRtbDtcbn07XG5cbmZ1bmN0aW9uIGRhdGVGcm9tT2JqZWN0SWQoIG9iamVjdElkICkge1xuICAgIHZhciBkYXRlT2JqZWN0ID0gbmV3IERhdGUoIHBhcnNlSW50KCBvYmplY3RJZC5zdWJzdHJpbmcoIDAsIDggKSwgMTYgKSAqIDEwMDAgKTtcbiAgICB2YXIgbW9udGggPSBbICdKYW51YXJ5JywgJ0ZlYnJ1YXJ5JywgJ01hcmNoJywgJ0FwcmlsJywgJ01heScsICdKdW5lJywgXG4gICAgICAgICAgICAgICAgICAnSnVseScsICdBdWd1c3QnLCAnU2VwdGVtYmVyJywgJ09jdG9iZXInLCAnTm92ZW1iZXInLCAnRGVjZW1iZXInIF07XG5cbiAgICB2YXIgc3RyID0gbW9udGhbIGRhdGVPYmplY3QuZ2V0TW9udGgoKSBdICsgJyAnO1xuICAgICAgICBzdHIgKz0gZGF0ZU9iamVjdC5nZXREYXRlKCkgKyAnICc7XG4gICAgICAgIHN0ciArPSBkYXRlT2JqZWN0LmdldEZ1bGxZZWFyKCkgKyAnLCAnO1xuICAgICAgICBzdHIgKz0gYWRkTGVhZGluZ1plcm8oIGRhdGVPYmplY3QuZ2V0SG91cnMoKSApICsgJzonO1xuICAgICAgICBzdHIgKz0gYWRkTGVhZGluZ1plcm8oIGRhdGVPYmplY3QuZ2V0TWludXRlcygpICkgKyAnOic7XG4gICAgICAgIHN0ciArPSBhZGRMZWFkaW5nWmVybyggZGF0ZU9iamVjdC5nZXRTZWNvbmRzKCkgKTtcblxuICAgIHJldHVybiBzdHI7XG59O1xuXG5mdW5jdGlvbiBhZGRMZWFkaW5nWmVybyggbnVtYmVyICkge1xuICAgIGlmKCBudW1iZXIudG9TdHJpbmcoKS5sZW5ndGggPT0gMSApIHtcbiAgICAgICAgbnVtYmVyID0gJzAnICsgbnVtYmVyO1xuICAgIH1cblxuICAgIHJldHVybiBudW1iZXI7XG59O1xuJCggZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIHJvb3RVUkwgICAgICAgICAgPSB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgd2luZG93LmxvY2F0aW9uLmhvc3QsXG4gICAgICAgIHBhdGhOYW1lICAgICAgICAgPSB0b3AubG9jYXRpb24ucGF0aG5hbWUsXG4gICAgICAgIGpzb25EYXRhICAgICAgICAgPSAnJyxcbiAgICAgICAgYXBpRmFpbEVsZW1lbnQgICA9IHsgJ3RpdGxlJzogJ1NvcnJ5LCB3ZSBkaWQgbm90IGZpbmQgYW55dGhpbmcuLicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICdib2R5JzogICdDb250YWN0IHNvbWVib2R5IGlmIHRoaXMga2VlcHMgb24gaGFwcGVuaW5nLi4nIH0sXG4gICAgICAgIGZldGNoaW5nRWxlbWVudCAgPSB7ICd0aXRsZSc6ICdGZXRjaGluZyBEYXRhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2JvZHknOiAgJzxpbWcgc3JjPVwiaW1ncy9sb2FkZXIuZ2lmXCIgYWx0PVwiTG9hZGluZy4uLlwiIGlkPVwibG9hZGVyXCI+JyB9LFxuICAgICAgICBub1Jlc3VsdHNFbGVtZW50ID0geyAndGl0bGUnOiAnTm8gcmVzdWx0cy4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYm9keSc6ICAnU29ycnksIGJ1dCB3ZSBjb3VsZG5cXCd0IGZpbmQgYW55dGhpbmcgbWF0Y2hpbmcgdGhlIHNlYXJjaCBzdHJpbmcuPGJyPlByZXNzIHRoZSA8aSBjbGFzcz1cImZhIGZhLXRpbWVzXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPiBvciB0eXBlIHNvbWV0aGluZyBlbHNlLicgfTtcblxuICAgIGlmICggcGF0aE5hbWUgPT09ICcvJyApIHtcbiAgICAgICAgJC5nZXRKU09OKCByb290VVJMICsgJy9wb3N0cy8nLCBmdW5jdGlvbiAoIGRhdGEgKSB7XG4gICAgICAgICAgICBqc29uRGF0YSA9IGRhdGE7XG4gICAgICAgICAgICBjcmVhdGVEZWNrKCBqc29uRGF0YSApO1xuICAgICAgICB9ICkuZmFpbCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCAnI21haW4tZGVjaycgKS5hcHBlbmQoIGNhcmRXaXRoQm9keSggYXBpRmFpbEVsZW1lbnQgKSApO1xuICAgICAgICB9ICkuYWx3YXlzKCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoICcjbG9hZGVyJyApLnBhcmVudCgpLmhpZGUoKTtcbiAgICAgICAgfSApO1xuICAgIH0gZWxzZSBpZiAoIHBhdGhOYW1lID09PSAnL2Zvcm0nICkge1xuICAgICAgICB2YXIgaWQgICA9IGdldFVybFBhcmFtZXRlciggJ2lkJyApLFxuICAgICAgICAgICAgdHlwZSA9IGdldFVybFBhcmFtZXRlciggJ3R5cGUnICk7XG5cbiAgICAgICAgJCggJyNmb3JtJyApLmhpZGUoKTtcblxuICAgICAgICBpZiAoIHR5cGUgPT09ICd1cGRhdGUnICkge1xuICAgICAgICAgICAgJCggJyNmb3JtLWhlYWRlcicgKS5wcmVwZW5kKCAnVXBkYXRlICcgKTtcbiAgICAgICAgICAgICQoICcjZm9ybScgKS5hdHRyKCdhY3Rpb24nLCAnL3Bvc3RzLycgKyBpZCArICc/X21ldGhvZD1wdXQnKTtcbiAgICAgICAgfSBlbHNlIGlmICggdHlwZSA9PT0gJ2RlbGV0ZScgKSB7XG4gICAgICAgICAgICAkKCAnI2Zvcm0taGVhZGVyJyApLnByZXBlbmQoICdEZWxldGUgJyApO1xuICAgICAgICAgICAgJCggJyNmb3JtJyApLmF0dHIoJ2FjdGlvbicsICcvcG9zdHMvJyArIGlkICsgJz9fbWV0aG9kPWRlbGV0ZScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJCggJyNmb3JtLWhlYWRlcicgKS5wcmVwZW5kKCAnQ3JlYXRlICcgKTtcbiAgICAgICAgICAgICQoICcjZm9ybScgKS5hdHRyKCdhY3Rpb24nLCAnL3Bvc3RzJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIGlkICE9IG51bGwgKSB7XG4gICAgICAgICAgICAkLmdldEpTT04oIHJvb3RVUkwgKyAnL3Bvc3RzLycgKyBpZCwgZnVuY3Rpb24gKCBlbGVtZW50ICkge1xuICAgICAgICAgICAgICAgICQoICcjdGl0bGUnICkudmFsKCBlbGVtZW50LnRpdGxlICk7XG4gICAgICAgICAgICAgICAgJCggJyNib2R5JyApLnZhbCggZWxlbWVudC5ib2R5ICk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIHR5cGUgPT09ICd1cGRhdGUnICkge1xuICAgICAgICAgICAgICAgICAgICAkKCAnI3N1Ym1pdCcgKS5hdHRyKCAndmFsdWUnLCAnRWRpdCcgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCB0eXBlID09PSAnZGVsZXRlJyApIHtcbiAgICAgICAgICAgICAgICAgICAgJCggJyN0aXRsZSwgI2JvZHknICkucHJvcCggJ2Rpc2FibGVkJywgdHJ1ZSApO1xuICAgICAgICAgICAgICAgICAgICAkKCAnI3N1Ym1pdCcgKS5yZW1vdmVDbGFzcyggJ2J0bi1zdWNjZXNzJyApLmFkZENsYXNzKCAnYnRuLWRhbmdlcicgKS5hdHRyKCAndmFsdWUnLCAnRGVsZXRlJyApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gKTtcbiAgICAgICAgfVxuXG4gICAgICAgICQoICcjbG9hZGVyJyApLmhpZGUoKTtcbiAgICAgICAgJCggJyNmb3JtJyApLnNob3coKTtcbiAgICB9XG5cbiAgICAkKCAnI21haW4tZGVjaycgKS5vbiggJ2NsaWNrJywgJy5jbGlja2FibGUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwb3N0SWQgID0gJCggdGhpcyApLmF0dHIoICdkYXRhLWlkJyApO1xuXG4gICAgICAgICQoICcubW9kYWwnICkuZW1wdHkoKS5hcHBlbmQoIGNhcmRXaXRoQm9keSggZmV0Y2hpbmdFbGVtZW50ICkgKTtcbiAgICAgICAgJCggJyNtb2RhbC1vdmVybGF5JyApLnNob3coKTtcblxuICAgICAgICAkLmdldEpTT04oIHJvb3RVUkwgKyAnL3Bvc3RzLycgKyBwb3N0SWQsIGZ1bmN0aW9uICggZGF0YSApIHtcbiAgICAgICAgICAgICQoICcubW9kYWwnICkuZW1wdHkoKS5hcHBlbmQoIGNhcmRXaXRoQm9keSggZGF0YSApICk7XG4gICAgICAgIH0gKTtcblxuICAgICAgICAkKCAnLm1vZGFsLWNsb3NlJyApLmNsaWNrKCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoICcjbW9kYWwtb3ZlcmxheScgKS5oaWRlKCk7XG4gICAgICAgIH0gKTtcbiAgICB9ICk7XG4gICAgXG4gICAgJCggJyNzZWFyY2gtZmllbGQnICkua2V5dXAoIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc2VhcmNoSW5wdXQgPSAkKCB0aGlzICkudmFsKCkudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICAkKCAnI2NsZWFyLXNlYXJjaC1maWVsZCcgKS5yZW1vdmVDbGFzcyggJ2Rpc2FibGVkJyApO1xuICAgICAgICAkKCAnI21haW4tZGVjaycgKS5lbXB0eSgpO1xuXG4gICAgICAgIGpzb25EYXRhLmZvckVhY2goIGZ1bmN0aW9uICggZWxlbWVudCApIHtcbiAgICAgICAgICAgIGlmICggZWxlbWVudC50aXRsZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoIHNlYXJjaElucHV0ICkgPj0gMCApIHtcbiAgICAgICAgICAgICAgICAkKCAnI21haW4tZGVjaycgKS5hcHBlbmQoIGNhcmROb0JvZHkoIGVsZW1lbnQgKSApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9ICk7XG5cbiAgICAgICAgaWYgKCAkKCAnI21haW4tZGVjaycgKS5pcyggJzplbXB0eScgKSApIHtcbiAgICAgICAgICAgICQoICcjbWFpbi1kZWNrJyApLmFwcGVuZCggY2FyZFdpdGhCb2R5KCBub1Jlc3VsdHNFbGVtZW50ICkgKTtcbiAgICAgICAgfVxuXG4gICAgICAgICQoICcjY2xlYXItc2VhcmNoLWZpZWxkJyApLmNsaWNrKCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoIHRoaXMgKS5hZGRDbGFzcyggJ2Rpc2FibGVkJyApO1xuICAgICAgICAgICAgJCggJyNzZWFyY2gtZmllbGQnICkudmFsKCAnJyApO1xuICAgICAgICAgICAgJCggJyNtYWluLWRlY2snICkuZW1wdHkoKTtcbiAgICAgICAgICAgIGNyZWF0ZURlY2soIGpzb25EYXRhICk7XG4gICAgICAgIH0gKTtcblxuICAgICAgICBpZiAoIHNlYXJjaElucHV0ID09ICcnICkge1xuICAgICAgICAgICAgJCggJyNjbGVhci1zZWFyY2gtZmllbGQnICkuYWRkQ2xhc3MoICdkaXNhYmxlZCcgKTtcbiAgICAgICAgfVxuICAgIH0gKTtcbn0gKTsiXX0=
